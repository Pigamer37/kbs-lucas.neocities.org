<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>KB's RSS Generator for Podcasts</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="An online RSS podcast feed generator" />
<!-- Social media stuff -->
    <meta property="og:title" content="KB's RSS Generator for Podcasts" />
    <meta property="og:description" content="An online RSS podcast feed generator" />
    <meta property="og:image" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta property="og:image:alt" content="Preview image" />
    
    <meta name="twitter:title" content="KB's RSS Generator for Podcasts" />
    <meta name="twitter:description" content="An online RSS podcast feed generator" />
    <meta name="twitter:url" content="https://kbs-lucas.neocities.org/?src=twitter" />
    <meta name="twitter:image:src" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta name="twitter:image:alt" content="27 different home appliances" />
    <meta name="twitter:creator" content="@KBs__Lucas" />
    <meta name="twitter:site" content="@KBs__Lucas" />
<!-- Social media end -->
    <link href="/window.css" rel="stylesheet" type="text/css" media="all">
    <meta name="theme-color" content="#ff9933" />
    <link href="/styles/UI.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="canonical" href="https://kbs-lucas.neocities.org/tools/RSS-Gen-Podcast" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://kbs-lucas.neocities.org/RSS.xml">
    <script src="/scripts/user-color.js"></script>
  </head>
  <body>
    <header>
      <nav class="window" id="navigation" role="menubar" tabindex="0">
        <div class="title-bar">
          <span class="title">Site Content Navigation</span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">✕</button>
          </div>
        </div>
        <div class="content">
          <ul role="list">
            <li><a href="/index" role="menuitem" tabindex="0" style="margin:1ch">Home</a>
            <li><a href="/es" hreflang="es-ES" lang="es-ES" role="menuitem" tabindex="0" style="margin: 1ch">Página en Español</a>
            <li><a href="/posts" role="menuitem" tabindex="0" style="margin:1ch">Posts</a>
            <li><a href="/socials" role="menuitem" tabindex="0" style="margin:1ch">Socials/Contact</a>
            <li><a href="/about" role="menuitem" tabindex="0" style="margin:1ch">About</a>
            <li><a href="#footer" role="menuitem" tabindex="0" style="margin:1ch">More Info</a>
          </ul>
        </div>
      </nav>
    </header>
    <main>
    <style>form{display:flex;flex-direction:column;align-content:center;flex-wrap:wrap;& p,& > span,& > div{width:clamp(240px,100%,40rem);}& button{width:100%}}fieldset{box-sizing:border-box;display:flex;flex-direction:column;width:clamp(240px,100%,40rem);line-height:1.2;& input[type="text"],& input[type="url"],& input[type="email"],& input[type="number"]{width:100%;}& label{margin-block-end:1rem;&.half-w{width:50%;}}}textarea{tab-size:2;resize:vertical;width:100%;} #res-box{margin-block-end:1rem;background-color:rgb(13 18 28);border:1px solid light-dark(white, black);;overflow:hidden;border-radius:0 0 1rem 1rem;& label{margin-inline:14px}& label textarea{width:calc(100% - 28px);resize:none;margin-inline:14px;}& #copy{font-weight:bold;border:0;height:max(1rem,32px);background-color:blue;color:white;}}/*#copy:before{content:'';mask-image: url(https://developer.mozilla.org/static/media/clippy.92fffda9d37d9c3a3b37.svg);}*/</style>
    <h1 style="display:flex;justify-content:center;">KB's RSS Generator for Podcasts</h1>
     <article class="window" id="main_win">
        <div class="title-bar">
          <span class="title">KB's RSS feed generator for podcasts<noscript style="color:red">JavaScript is off</noscript></span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">✕</button>
          </div>
        </div>
        <div class="content">
        <noscript><p style="color:red;margin-block-end=0.625rem;">JavaScript is off, this demo won't load or work without it... sorry!</p></noscript>
        <form id="RSS-input">
          <p>To make standard RSS feeds, use <a href="/RSS-Generatort">this version</a>.</p>
          <label><input type="checkbox" name="chanCheck"> I need to define my RSS channel too </label>
          <p>If you are starting from scratch, you will need to make your RSS channel. You only need to do this once for each podcast (not each episode), and when it's done you'll only need to make your items/episodes.</p>
          <span id="Channel" name="channel" style="display:none"><p style="dis">As defined in <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390" target="_blank">the specification</a>, a podcast's channel must have the title, description, image, language, category and &lt;itunes:explicit&gt; elements, and at least one item:</p>
          <fieldset name="channel"><legend>Podcast/Channel data</legend>
          <label>Title of the podcast <input type="text" name="title" placeholder="The John Doe Podcast" required></label>
          <label>Podcast Author(s) <input type="text" name="podAuthor" placeholder="John Doe"></label>
          <label>Link to the podcast (if it has a website or similar) <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org/podcast" name="link"></label>
          <label>Link to the .xml file where this feed will be available (recommended) <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org/podcast/RSS.xml" name="atomLink"></label>
          <label>Description <input type="text" name="desc" placeholder="A comedy podcast made by John Doe, about basketball and soccer and video games" required></label>
          Image:
          <label>Image URL <input type="url" autocomplete="url" inputmode="url" title="Publicly available square JPEG or PNG URL between 1400 & 3000px" pattern="\S+[.](?:jpeg|png|JPEG|PNG)\s*$" placeholder="https://www.johndoe.org/img.[gif/jpeg/png]" name="imURL" required></label>
          <span style="width:100%;margin-block-end:1rem"><label>Image size (must be square, if equal to 3000px you can leave it blank) <input type="number" min="1400" max="3000" step="1" name="imWidth" placeholder="In pixels"></label>
          </span>
          <label>Image description <input type="text" name="imDesc" placeholder="A podcast logo/artwork..."></label>
          <label>Language <input type="text" name="lang" autocomplete="language" list="ISO639-1langs" placeholder="en-US" pattern="^[a-z]{2,4}(-[A-Z][a-z]{3})?(-([A-Z]{2}|[0-9]{3}))?$" required></label>
          <datalist id="ISO639-1langs">
            <option value="">Enter a language code</option><option value="aa">Afar</option><option value="ab">Abkhazian</option><option value="af">Afrikaans</option><option value="ak">Akan</option><option value="sq">Albanian</option><option value="am">Amharic</option><option value="ar">Arabic</option><option value="an">Aragonese</option><option value="hy">Armenian</option><option value="as">Assamese</option><option value="av">Avaric</option><option value="ae">Avestan</option><option value="ay">Aymara</option><option value="az">Azerbaijani</option><option value="ba">Bashkir</option><option value="bm">Bambara</option><option value="eu">Basque</option><option value="be">Belarusian</option><option value="bn">Bengali</option><option value="bi">Bislama</option><option value="bo">Tibetan</option><option value="bs">Bosnian</option><option value="br">Breton</option><option value="bg">Bulgarian</option><option value="my">Burmese</option><option value="ca">Catalan; Valencian</option><option value="cs">Czech</option><option value="ch">Chamorro</option><option value="ce">Chechen</option><option value="zh">Chinese</option><option value="cu">Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic</option><option value="cv">Chuvash</option><option value="kw">Cornish</option><option value="co">Corsican</option><option value="cr">Cree</option><option value="cy">Welsh</option><option value="cs">Czech</option><option value="da">Danish</option><option value="de">German</option><option value="dv">Divehi; Dhivehi; Maldivian</option><option value="nl">Dutch; Flemish</option><option value="dz">Dzongkha</option><option value="el">Greek, Modern (1453-)</option><option value="en">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="eu">Basque</option><option value="ee">Ewe</option><option value="fo">Faroese</option><option value="fa">Persian</option><option value="fj">Fijian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="fy">Western Frisian</option><option value="ff">Fulah</option><option value="ka">Georgian</option><option value="de">German</option><option value="gd">Gaelic; Scottish Gaelic</option><option value="ga">Irish</option><option value="gl">Galician</option><option value="gv">Manx</option><option value="el">Greek, Modern (1453-)</option><option value="gn">Guarani</option><option value="gu">Gujarati</option><option value="ht">Haitian; Haitian Creole</option><option value="ha">Hausa</option><option value="he">Hebrew</option><option value="hz">Herero</option><option value="hi">Hindi</option><option value="ho">Hiri Motu</option><option value="hr">Croatian</option><option value="hu">Hungarian</option><option value="hy">Armenian</option><option value="ig">Igbo</option><option value="is">Icelandic</option><option value="io">Ido</option><option value="ii">Sichuan Yi; Nuosu</option><option value="iu">Inuktitut</option><option value="ie">Interlingue; Occidental</option><option value="ia">Interlingua (International Auxiliary Language Association)</option><option value="id">Indonesian</option><option value="ik">Inupiaq</option><option value="is">Icelandic</option><option value="it">Italian</option><option value="jv">Javanese</option><option value="ja">Japanese</option><option value="kl">Kalaallisut; Greenlandic</option><option value="kn">Kannada</option><option value="ks">Kashmiri</option><option value="ka">Georgian</option><option value="kr">Kanuri</option><option value="kk">Kazakh</option><option value="km">Central Khmer</option><option value="ki">Kikuyu; Gikuyu</option><option value="rw">Kinyarwanda</option><option value="ky">Kirghiz; Kyrgyz</option><option value="kv">Komi</option><option value="kg">Kongo</option><option value="ko">Korean</option><option value="kj">Kuanyama; Kwanyama</option><option value="ku">Kurdish</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="li">Limburgan; Limburger; Limburgish</option><option value="ln">Lingala</option><option value="lt">Lithuanian</option><option value="lb">Luxembourgish; Letzeburgesch</option><option value="lu">Luba-Katanga</option><option value="lg">Ganda</option><option value="mk">Macedonian</option><option value="mh">Marshallese</option><option value="ml">Malayalam</option><option value="mi">Maori</option><option value="mr">Marathi</option><option value="ms">Malay</option><option value="mk">Macedonian</option><option value="mg">Malagasy</option><option value="mt">Maltese</option><option value="mn">Mongolian</option><option value="mi">Maori</option><option value="ms">Malay</option><option value="my">Burmese</option><option value="na">Nauru</option><option value="nv">Navajo; Navaho</option><option value="nr">Ndebele, South; South Ndebele</option><option value="nd">Ndebele, North; North Ndebele</option><option value="ng">Ndonga</option><option value="ne">Nepali</option><option value="nl">Dutch; Flemish</option><option value="nn">Norwegian Nynorsk; Nynorsk, Norwegian</option><option value="nb">Bokmål, Norwegian; Norwegian Bokmål</option><option value="no">Norwegian</option><option value="ny">Chichewa; Chewa; Nyanja</option><option value="oc">Occitan (post 1500)</option><option value="oj">Ojibwa</option><option value="or">Oriya</option><option value="om">Oromo</option><option value="os">Ossetian; Ossetic</option><option value="pa">Panjabi; Punjabi</option><option value="fa">Persian</option><option value="pi">Pali</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ps">Pushto; Pashto</option><option value="qu">Quechua</option><option value="rm">Romansh</option><option value="ro">Romanian; Moldavian; Moldovan</option><option value="rn">Rundi</option><option value="ru">Russian</option><option value="sg">Sango</option><option value="sa">Sanskrit</option><option value="si">Sinhala; Sinhalese</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="se">Northern Sami</option><option value="sm">Samoan</option><option value="sn">Shona</option><option value="sd">Sindhi</option><option value="so">Somali</option><option value="st">Sotho, Southern</option><option value="es">Spanish; Castilian</option><option value="sq">Albanian</option><option value="sc">Sardinian</option><option value="sr">Serbian</option><option value="ss">Swati</option><option value="su">Sundanese</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="ty">Tahitian</option><option value="ta">Tamil</option><option value="tt">Tatar</option><option value="te">Telugu</option><option value="tg">Tajik</option><option value="tl">Tagalog</option><option value="th">Thai</option><option value="bo">Tibetan</option><option value="ti">Tigrinya</option><option value="to">Tonga (Tonga Islands)</option><option value="tn">Tswana</option><option value="ts">Tsonga</option><option value="tk">Turkmen</option><option value="tr">Turkish</option><option value="tw">Twi</option><option value="ug">Uighur; Uyghur</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="uz">Uzbek</option><option value="ve">Venda</option><option value="vi">Vietnamese</option><option value="vo">Volapük</option><option value="cy">Welsh</option><option value="wa">Walloon</option><option value="wo">Wolof</option><option value="xh">Xhosa</option><option value="yi">Yiddish</option><option value="yo">Yoruba</option><option value="za">Zhuang; Chuang</option><option value="zh">Chinese</option><option value="zu">Zulu</option>
          </datalist>
          <label><input type="checkbox" name="explicit" required> This podcast is explicit </label>
          <a href="https://podcasters.apple.com/support/1691-apple-podcasts-categories" target="_blank">Available categories</a>
          <label>Categories or tags (comma separated) <input type="text" name="tags" placeholder="Sports0sub0Basketball0sub0Soccer,Leisure0sub0Video Games,Comedy" required></label>
          <label>Managing Editor email (not recommended) <input type="email" inputmode="email" name="mEdit"></label>
          <label>Web Master email (not recommended) <input type="email" inputmode="email" name="webMast"></label>
          <label>Hours where channel won't be updated in GMT (not recommended) <input type="time" step="3600" name="skipHours" id="skipHours"></label>
          <button id="skipHB" type="button" class="blue-button">Add hour</button>
          <label>Days where channel won't be updated (not recommended)</label>
          <button id="skipMon" type="button" class="blue-button">Skip Monday</button>
          <button id="skipTue" type="button" class="blue-button">Skip Tuesday</button>
          <button id="skipWed" type="button" class="blue-button">Skip Wednesday</button>
          <button id="skipThu" type="button" class="blue-button">Skip Thursday</button>
          <button id="skipFri" type="button" class="blue-button">Skip Friday</button>
          <button id="skipSat" type="button" class="blue-button">Skip Saturday</button>
          <button id="skipSun" type="button" class="blue-button" style="margin-block-end:1rem">Skip Sunday</button>
          <label>Time to live (<abbr>ttl</abbr>): how many minutes the channel can be cached before refreshing from the source (not recommended)<input type="number" min="0" step="1" name="ttl" placeholder="Ex: 60 (1 hour), use 0 to disable"></label>
          </fieldset>
          <p>As defined in <a href="https://www.rssboard.org/rss-specification" target="_blank">the specification</a>, &lt;item&gt; elements should be inside the &lt;channel&gt; tag, after all its other elements, and their order is not important. However, I recommend ordering items by date, keeping newer ones near the top, just to be consistent. There's no real limit to the number of items that can be present in a feed, so don't limit yourself if not needed, but I've read that if your feed updates frequently or has many items, keeping the 20-100 most recent ones is a good range to shoot for.</p>
          </span>
          <p>As defined in <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390" target="_blank">the specification</a>, there must be at least one item, and it must contain at least a title, enclosure (the file for the podcast) and guid (basically a link or a unique identifier for the episode). I recommend including all of these (except stated otherwise):</p>
          <fieldset name="item"><legend>Item/Article data</legend>
          <label>Title <input type="text" name="title" placeholder="Interesting episode" required></label>
          <label>Link to the article <input type="url" autocomplete="url" inputmode="url" name="link" placeholder="https://www.johndoe.org/podcast/episode1"></label>
          <label>Description or summary <input type="text" name="desc" placeholder="An interesting episode about interesting topics"></label>
          <label>Episode file URL <input type="url" autocomplete="url" inputmode="url" name="content" placeholder="https://www.johndoe.org/podcast/episode1.mp3" required>(goes through <a href="https://test.cors.workers.dev/?" target="_blank">3rd party proxy</a>)</label>
          <p>Or if you get an error, <strong>also</strong> use:</p>
          <label>Episode file (doesn't get uploaded anywhere) <input type="file" name="encFile" accept="audio/x-m4a,audio/mpeg,video/quicktime,video/mp4,video/x-m4v,application/pdf"></label>
          </fieldset>
          <span style="align-self:center;"><div id="res-box"><output form="RSS-input"><label style="margin-block-start:1rem">Result <textarea name="result" placeholder="RSS result here" readonly ></textarea></output></label>
          <button id="copy" type="button">Copy result to clipboard</button></div>
          <div>If you don't want to use the current date, please change the &lt;pubDate&gt; tag with a RFC 2822 date. You can use <a href="https://timestampgenerator.com/" target="_blank">timestamp&shy;generator</a>.</div>
          <button style="width:49%;display:none" id="validate" type="button" class="blue-button">Validate the feed provided in "Link to the .xml file" using <a href="https://www.castfeedvalidator.com/validate.php" target="_blank">Cast Feed Validator</a>)</button>
          <button style="width:49%;display:none" id="validateURL" type="button" class="blue-button">Validate the feed provided in "Link to the .xml file" using <a href="https://podba.se/validate/" target="_blank">the podbase validator</a></button>
          <button style="display:none"id="validApple" type="button" class="blue-button">Validate the feed provided in "Link to the .xml file" using <a href="https://podcastsconnect.apple.com/my-podcasts/new-feed" target="_blank">the official validator (Apple Podcast Connect)</a></button></span>
        </form>
        <script>function replacespecialChars(str){if(typeof str!=='string')return;
          return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("’","&apos;").replaceAll("“","&quot;").replaceAll("©","&#xA9;").replaceAll("℗","&#x2117;").replaceAll("™","&#x2122;");}
        const form=document.querySelector('form');const result=document.getElementsByName("result")[0];
        let item, channel, chTitle, chDesc, chLink, imURL, imDesc, imWidth, chaLink, chTags, mEdit, webMast, podAuthor, lang, explicit, title, link, desc, content, encFile;
        let skipHB, skipMon, skipTue, skipWed, skipThu, skipFri, skipSat, skipSun, ttl;
        let skipHoursStr="";
        let dayBools = new Array(7);dayBools.fill(false);
        for(fieldset of form.children){if(fieldset.name==='item')item=fieldset;else if(fieldset.localName==="span"&&fieldset.id==="Channel"){channel=fieldset.children[1]}}
        for(ch of item.children){switch(ch.children[0]?.name){case 'title': title=ch.children[0];break;case 'link': link=ch.children[0];break;case 'desc': desc=ch.children[0];break;case 'content': content=ch.children[0];break;case 'encFile': encFile=ch.children[0];break;default:}}
        function getPromiseFromEvent(item, event) {
          return new Promise((resolve) => {
            const listener = () => {
              item.removeEventListener(event, listener);
              resolve();
            }
            item.addEventListener(event, listener);
          })
        }
        function GetDuration(file){return new Promise((resolve, reject)=>{
            if(file===undefined)reject(-1);
            if(file.type.includes("audio")){
                let a=new Audio(URL.createObjectURL(file));a.preload='metadata';
                new Promise((reso)=>{
                  const listener=()=>{
                    a.removeEventListener('loadedmetadata',listener);
                    URL.revokeObjectURL(file);
                    reso(Math.round(a.duration));
                  }
                  a.addEventListener('loadedmetadata',listener);
                  a.src=URL.createObjectURL(file);
                }).then(e=>{resolve(e);console.log("Duration (audio): ",e);})
                //console.log("Audio: ",a);resolve(a.duration);console.log("Duration ",a.duration);
            }else if(file.type.includes("video")){let vid=document.createElement('video');vid.preload='metadata';
                new Promise((reso)=>{
                  const listener=()=>{
                    vid.removeEventListener('loadedmetadata',listener);
                    window.URL.revokeObjectURL(vid.src);
                    reso(Math.round(vid.duration));
                  }
                  vid.addEventListener('loadedmetadata',listener);
                  vid.src=URL.createObjectURL(file);
                }).then(e=>{resolve(e);console.log("Duration (video): ",e);})
            }else{reject(-1)}
        })
        }
        function ParseItem(){
        return new Promise((resolve, reject)=>{
          let RSStext="";
          if(title.value!=="")RSStext="\n\t<title><![CDATA["+title.value+"]]></title>";
          let guid="";if(link.value!==""){RSStext+="\n\t<link>"+link.value+"</link>";guid="\n\t<guid>"+link.value+"</guid>"}
          if(desc.value!=="")RSStext+="\n\t<description><![CDATA["+desc.value+"]]></description>";
          if(content.value!==""){const option={method:'HEAD'};
            const url='https://test.cors.workers.dev/?'+content.value;
            let blob=undefined;
            fetch(url,option).then(res=>{if(!res.ok){
                content.setCustomValidity(`Can't access file from this site (bad response)`);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);return;
            }else{blob={ size:res.headers.get('Content-Length'), type:res.headers.get('Content-Type')};
            /*res.blob()}).then(blob=>{*/
                if(blob.size>0){
                  if((blob.type==="audio/x-m4a")||(blob.type==="audio/mpeg")||(blob.type==="video/quicktime")||(blob.type==="video/mp4")||(blob.type==="video/x-m4v")||(blob.type==="application/pdf")){
                    RSStext+=`\n\t<enclosure url="${content.value}"\n\t\tlength="${blob.size}"\n\t\ttype="${blob.type}"\n\t/>`;
                  }else{blob=undefined;content.setCustomValidity(`Invalid type "${blob.type}", please provide a M4A, MP3, MOV, MP4, M4V, or PDF file`);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);}
                }else{blob=undefined;content.setCustomValidity(`Invalid file size`);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);}
            }}).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){
                content.setCustomValidity(`Can't access file from this site`);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);
            }else{content.setCustomValidity(e);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);}}).finally(e=>{
              if((encFile.value!=="")&&(blob===undefined)){
                GetDuration(encFile.files[0]).then(dur=>{RSStext+=`\n\t<itunes:duration>${dur}</itunes:duration>`;}).finally(e=>{
                  RSStext+=`\n\t<enclosure url="${content.value}"\n\t\tlength="${encFile.files[0].size}"\n\t\ttype="${encFile.files[0].type}"\n\t/>`;
                  let now=new Date().toUTCString();RSStext+="\n\t<pubDate>"+now+"</pubDate>";RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>";
                  resolve(RSStext);
                });
              }else{
                if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t<pubDate>"+now+"</pubDate>";RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>";}
                resolve(RSStext);
              }
            });
          }else{
              if(encFile.value!==""){
                GetDuration(encFile.files[0]).then(dur=>{RSStext+=`\n\t<itunes:duration>${dur}</itunes:duration>`;}).finally(e=>{
                  content.setCustomValidity(`Provide a file URL (even if it's not valid)`);content.reportValidity();setTimeout(()=>{content.setCustomValidity("")},3000);
                  RSStext+=`\n\t<enclosure url=NOT DEFINED!!!\n\t\tlength="${encFile.files[0].size}"\n\t\ttype="${encFile.files[0].type}"\n\t/>`;
                  let now=new Date().toUTCString();RSStext+="\n\t<pubDate>"+now+"</pubDate>";RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>";
                  console.log("Resolving ",RSStext);
                  resolve(RSStext);               
                });
              }else{
                if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t<pubDate>"+now+"</pubDate>";RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>";}
                resolve(RSStext);
              }
          }
        });
        }
        for(ch of channel.children){if(ch.localName==="span"){imWidth=ch.children[0].children[0];continue;}else if(ch.localName==="button"){
          switch(ch.id){case 'skipMon': skipMon=ch;break;case 'skipTue': skipTue=ch;break;case 'skipWed': skipWed=ch;break;case 'skipThu': skipThu=ch;break;case 'skipFri': skipFri=ch;break;case 'skipSat': skipSat=ch;break;case 'skipSun': skipSun=ch;break;case 'skipHB': skipHB=ch;break;default:}continue;
        }switch(ch.children[0]?.name){case 'title': chTitle=ch.children[0];break;case 'link': chLink=ch.children[0];break;case 'desc': chDesc=ch.children[0];break;case 'imURL': imURL=ch.children[0];break;case 'imDesc': imDesc=ch.children[0];break;case 'imWidth': imWidth=ch.children[0];case 'tags': chTags=ch.children[0];break;case 'atomLink': chaLink=ch.children[0];break;case 'lang': lang=ch.children[0];break;case 'mEdit': mEdit=ch.children[0];break;case 'webMast': webMast=ch.children[0];break;case 'podAuthor': podAuthor=ch.children[0];break;case 'explicit': explicit=ch.children[0];break;default:}if(ch.children[1]?.name==='ttl')ttl=ch.children[1];}
        const skipHours=document.getElementById("skipHours");
        skipHB.addEventListener("click", (e)=>{
          if((skipHours?.value!==undefined)&&(skipHours.value!=="")){
            const h=skipHours.value.slice(0,2);const hInt=parseInt(h);
            if((!skipHoursStr.includes(h))&&(!isNaN(hInt))){if(skipHoursStr==="")skipHoursStr="\n\t\t<skipHours>\n\t\t</skipHours>";
              skipHoursStr=`${skipHoursStr.slice(0, -15)}\n\t\t\t<hour>${h}</hour>\n\t\t</skipHours>`
            }
          }
          updateRes();
        })
        const DayButtons=[skipMon, skipTue, skipWed, skipThu, skipFri, skipSat, skipSun]
        for(let i=0;i<DayButtons.length;i++){DayButtons[i].addEventListener("click", (e)=>{
            dayBools[i]=!dayBools[i];
            if(dayBools[i])e.target.innerText="Don't "+e.target.innerText;
            else e.target.innerText=e.target.innerText.slice(6);
            updateRes();
          });
        }
        function ParseChannel(){
        return new Promise((resolve, reject)=>{
          let RSStext="";
          if(chTitle.value!=="")RSStext="\n\t\t<title><![CDATA["+chTitle.value+"]]></title>";
          if(chLink.value!=="")RSStext+="\n\t\t<link>"+chLink.value+"</link>";
          if(chaLink.value!=="")RSStext+='\n\t\t<atom:link href="'+chaLink.value+'" rel="self" type="application/rss+xml"/>';
          if(chDesc.value!=="")RSStext+="\n\t\t<description><![CDATA["+chDesc.value+"]]></description>";
          let langChannel='';
          if(lang.value!==""){RSStext+="\n\t\t<language>"+lang.value+"</language>";langChannel=`xml:lang="${lang.value}" `}
          RSStext+="\n\t\t<itunes:explicit>";RSStext+=(explicit.checked)?'true':'false';RSStext+='</itunes:explicit>';
          if(imURL.value!==""){RSStext+='\n\t\t<itunes:image href="'+imURL.value+'"/>';}
          if((imURL.value!=="")||(imDesc.value!=="")||(imWidth.value!=="")){
            RSStext+="\n\t\t<image>";if(imURL.value!==""){RSStext+="\n\t\t\t<url>"+imURL.value+"</url>\n\t\t\t<title><![CDATA["+chTitle.value+"]]></title>\n\t\t\t<link>"+chLink.value+"</link>";}if(imDesc.value!==""){RSStext+="\n\t\t\t<description><![CDATA["+imDesc.value+"]]></description>";}if(imWidth.value!==""){RSStext+="\n\t\t\t<width>"+imWidth.value+"</width>\n\t\t\t<height>"+imWidth.value+"</height>";}RSStext+="\n\t\t</image>";
          }
          if(mEdit.value!=="")RSStext+="\n\t\t<managingEditor>"+mEdit.value+"</managingEditor>";
          if(webMast.value!=="")RSStext+="\n\t\t<webMaster>"+webMast.value+"</webMaster>";
          if(podAuthor.value!=="")RSStext+='\n\t\t<itunes:author>'+replacespecialChars(podAuthor.value)+'</itunes:author>';
          if(chTags.value!==""){let tagarr=replacespecialChars(chTags.value).split(",");for(tag of tagarr){RSStext+="\n\t\t<category>"+tag+'</category>\n\t\t<itunes:category text="';
          if(tag.includes("0sub0")){let subtagarr=tag.split("0sub0");for(let i=0;i<subtagarr.length;i++){if(i===0){RSStext+=`${subtagarr[0]}">`}else{RSStext+=`\n\t\t\t<itunes:category text="${subtagarr[i]}" />`;}}RSStext+='\n\t\t</itunes:category>'}else{RSStext+=`${tag}" />`;}}}
          if(dayBools.find((e)=> e === true)!==undefined){
            RSStext+="\n\t\t<skipDays>";
            for(let i=0;i<dayBools.length;i++){
              if(dayBools[i]){RSStext+="\n\t\t\t<day>";switch(i){case 0: RSStext+="Monday";break;case 1: RSStext+="Tuesday";break;case 2: RSStext+="Wednesday";break;case 3: RSStext+="Thursday";break;case 4: RSStext+="Friday";break;case 5: RSStext+="Saturday";break;case 6: RSStext+="Sunday";break;default:}RSStext+="</day>";}
            }
            RSStext+="\n\t\t</skipDays>";
          }RSStext+=skipHoursStr;
          if((ttl?.value!==undefined)&&(!isNaN(parseInt(ttl.value)))&&(ttl.value>0))RSStext+=`\n\t\t<ttl>${ttl.value}</ttl>`;
          if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t\t<pubDate>"+now+"</pubDate>\n\t\t<lastBuildDate>"+now+"</lastBuildDate>\n\t\t<docs>https://podcasters.apple.com/support/823-podcast-requirements</docs>\n\t\t<generator>KB's RSS podcast feed generator v0.1 (https://kbs-lucas.nekoweb.org/tools/RSS-Gen-Podcast)</generator>\n\t\t<podcast:locked>yes</podcast:locked>\n\t\t<podcast:medium>podcast</podcast:medium>";
          }
          ParseItem().then(itemRSS=>{
              if(itemRSS!=="")RSStext+="\n\t\t"+itemRSS.replaceAll("\n","\n\t\t");
              if(RSStext!==""){RSStext=`<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet type="text/xsl" href="https://media.rss.com/style.xsl"?>\n<rss xmlns:podcast="https://podcastindex.org/namespace/1.0" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" ${langChannel}version="2.0">\n\t<channel>`+RSStext;RSStext+="\n\t</channel>\n</rss>";}
              resolve(RSStext);
          });
        });
        }
        
        function updateRes(){let prom;if(chanCheck.checked){prom=ParseChannel().then(r=>result.value=r)}else{prom=ParseItem().then(r=>result.value=r)}prom.then(e=>{result.style.height="1px";result.style.height=(result.scrollHeight)+"px";})}
        const channelInput=document.getElementById('Channel');
        const valBtn=document.getElementById('validate');
        const valURLBtn=document.getElementById('validateURL');
        const valApple=document.getElementById('validApple');
        const chanCheck=document.querySelector('input[type="checkbox"][name="chanCheck"]');
        chanCheck.addEventListener('input', (event)=>{if(event.target.checked){channelInput.style.display="unset";valBtn.style.display="unset";valURLBtn.style.display="unset";valApple.style.display="unset";title.required=false;}else{channelInput.style.display="none";valBtn.style.display="none";valURLBtn.style.display="none";valApple.style.display="none";title.required=true;}updateRes();});
        encFile.addEventListener("change", ()=>{if(encFile.files.length>1){encFile.setCustomValidity(`Multiple files selected`);encFile.reportValidity();setTimeout(()=>{encFile.setCustomValidity("")},3000);return;}
            updateRes();
        },false,);
        const itemFields=[title, link, desc];
        const Fields=[chTitle, chLink, chDesc, chaLink, chTags, mEdit, imURL, imDesc, imWidth, webMast, podAuthor, lang, explicit, ttl, ...itemFields];
        Fields.forEach((elem)=>{elem.addEventListener("input", updateRes);});
        content.addEventListener("blur", updateRes);
        title.addEventListener('blur', (event)=>{event.target.reportValidity();});
        lang.addEventListener('invalid', (event)=>{event.target.setCustomValidity('Please enter a valid ISO 639-1 language code');});
        const copyBtn=document.getElementById('copy');
        copyBtn.addEventListener('click', (event)=>{navigator.clipboard.writeText(result.value).then((e)=>{console.log("copied!");event.target.innerText="Copied!";setTimeout(function(){this.innerText="Copy result to clipboard";}.bind(event.target), 3000);}).catch((error)=>{console.error(error);});});
        function validateRSSBoard(link=undefined, checker=undefined, mode=false){
          if(checker===undefined){checker=new URL("https://www.castfeedvalidator.com/validate.php");}
          const params=new URLSearchParams(checker.search);
          mode?params.append("url", link.value):params.append("submitfeed", link.value);
          window.open(checker.toString()+"?"+params.toString());
        }
        //valBtn.addEventListener('click', (event)=>{if(chanCheck.checked){form.reportValidity();validateRSSBoard();}else{itemFields.forEach((e)=>{e.reportValidity();});}});
        valURLBtn.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://podba.se/validate/",true);}}});
        valBtn.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://www.castfeedvalidator.com/validate.php",true);}}});
        valApple.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://podcastsconnect.apple.com/my-podcasts/new-feed",false);}}});
        </script>
        <p>TODO/Future enhancements (in order of importance):
        <ol>
          <li>✓ DONE! Channel/Podcast definition supported</li>
          <li>✓ DONE! Make basic copy of the generator and start modifying to make it usable for podcasts</li>
          <li>✓ DONE! Support enclosures fully (via proxy; may need a proxy change, but the infrastructure is built)</li>
        </ol></p>
        <p>Privacy notice: This demo runs entirely within your browser. In other words, no data is sent to me, the code is sent to your browser and runs locally. You could theoretically load the page, cut your network connection and then start it.</p>
        </div>
      </article>
    </main>
    <footer id="footer">
      <p>This webpage's HTML is licensed under a MIT license, CSS and site contents are protected by copyright&copy; law. <br></p>
      <p><a href="#">Back to top</a></p>
    </footer>
    <script defer src="/scripts/window.js"></script>
  </body>
</html>