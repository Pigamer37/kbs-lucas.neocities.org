<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>KB's RSS Generator</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="An online RSS feed generator" />
<!-- Social media stuff -->
    <meta property="og:title" content="KB's RSS Generator" />
    <meta property="og:description" content="An online RSS feed generator" />
    <meta property="og:image" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta property="og:image:alt" content="Preview image" />
    
    <meta name="twitter:title" content="KB's RSS Generator" />
    <meta name="twitter:description" content="An online RSS feed generator" />
    <meta name="twitter:url" content="https://kbs-lucas.neocities.org/?src=twitter" />
    <meta name="twitter:image:src" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta name="twitter:image:alt" content="27 different home appliances" />
    <meta name="twitter:creator" content="@KBs__Lucas" />
    <meta name="twitter:site" content="@KBs__Lucas" />
<!-- Social media end -->
    <link href="/window.css" rel="stylesheet" type="text/css" media="all">
    <meta name="theme-color" content="#ff9933" />
    <link href="/styles/UI.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <link rel="canonical" href="https://kbs-lucas.neocities.org/tools/RSS-Generator" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://kbs-lucas.neocities.org/RSS.xml">
    <script src="/scripts/user-color.js"></script>
  </head>
  <body>
    <header>
      <nav class="window" id="navigation" role="menubar" tabindex="0">
        <div class="title-bar">
          <span class="title">Site Content Navigation</span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">✕</button>
          </div>
        </div>
        <div class="content">
          <ul role="list">
            <li><a href="/index" role="menuitem" tabindex="0" style="margin:1ch">Home</a>
            <li><a href="/es" hreflang="es-ES" lang="es-ES" role="menuitem" tabindex="0" style="margin: 1ch">Página en Español</a>
            <li><a href="/posts" role="menuitem" tabindex="0" style="margin:1ch">Posts</a>
            <li><a href="/socials" role="menuitem" tabindex="0" style="margin:1ch">Socials/Contact</a>
            <li><a href="/about" role="menuitem" tabindex="0" style="margin:1ch">About</a>
            <li><a href="#footer" role="menuitem" tabindex="0" style="margin:1ch">More Info</a>
          </ul>
        </div>
      </nav>
    </header>
    <main>
    <style>form{display:flex;flex-direction:column;align-content:center;flex-wrap:wrap;& p,& > span,& > div{width:clamp(240px,100%,40rem);}& button{width:100%}}fieldset{box-sizing:border-box;display:flex;flex-direction:column;width:clamp(240px,100%,40rem);line-height:1.2;& input[type="text"],& input[type="url"],& input[type="email"],& input[type="number"]{width:100%;}& label{margin-block-end:1rem;&:has(input[type="number"]){width:50%;}}}textarea{tab-size:2;resize:vertical;width:100%;} #res-box{margin-block-end:1rem;background-color:rgb(13 18 28);border:1px solid light-dark(white, black);;overflow:hidden;border-radius:0 0 1rem 1rem;& label{margin-inline:14px}& label textarea{width:calc(100% - 28px);resize:none;margin-inline:14px;}& #copy{font-weight:bold;border:0;height:max(1rem,32px);background-color:blue;color:white;}}/*#copy:before{content:'';mask-image: url(https://developer.mozilla.org/static/media/clippy.92fffda9d37d9c3a3b37.svg);}*/</style>
    <h1 style="display:flex;justify-content:center;">KB's RSS Generator</h1>
     <article class="window" id="main_win">
        <div class="title-bar">
          <span class="title">KB's RSS feed generator<noscript style="color:red">JavaScript is off</noscript></span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">✕</button>
          </div>
        </div>
        <div class="content">
        <noscript><p style="color:red;margin-block-end=0.625rem;">JavaScript is off, this demo won't load or work without it... sorry!</p></noscript>
        <form>
          <label><input type="checkbox" name="chanCheck"> I need to define my RSS channel too </label>
          <span id="Channel" name="channel" style="display:none"><p style="dis">As defined in <a href="https://www.rssboard.org/rss-specification#requiredChannelElements" target="_blank">the specification</a>, a channel must have the title, link and description elements:</p>
          <fieldset name="channel"><legend>Channel data</legend>
          <label>Title of the website <input type="text" name="title" placeholder="The John Doe Blog" required></label>
          <label>Link to the website <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org" name="link" required></label>
          <label>Description <input type="text" name="desc" placeholder="A website made by John Doe, about sports, games or cinema" required></label>
          <label><input type="checkbox" name="imCheck"> Image </label>
          <!--<label>(Same as CHTITLE) Title of the image <input type="text" name="imTitle" placeholder="The John Doe Blog" required></label>
          <label>(Same as CHLINK) Link to the website <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org" name="imLink" required></label>-->
          <label style="display:none">Image URL <input type="url" autocomplete="url" inputmode="url" title="Publicly available GIF, JPEG or PNG URL" pattern=".+[.](?:gif|jpeg|png|GIF|JPEG|PNG)\s*$" placeholder="https://www.johndoe.org/img.[gif/jpeg/png]" name="imURL"></label>
          <span style="width:100%;display:flex;flex-wrap:wrap;flex:1;justify-content:space-between"><label style="display:none">Image width <input type="number" min="1" max="144" step="1" name="imWidth" placeholder="Def. is 88px. Width in pixels"></label>
          <label style="display:none">Image height <input type="number" min="1" max="400" step="1" name="imHeight" placeholder="Def. is 31px. Height in pixels"></label></span>
          <label style="display:none">Image description <input type="text" name="imDesc" placeholder="A website logo..."></label>
          <label>Language (recommended) <input type="text" name="lang" autocomplete="language" placeholder="en-US" pattern="^[a-z]{2,4}(-[A-Z][a-z]{3})?(-([A-Z]{2}|[0-9]{3}))?$"></label>
          <label>Link to the .xml file where your feed will be available (recommended) <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org/RSS.xml" name="atomLink"></label>
          <label>Categories or tags (comma separated) <input type="text" name="tags" placeholder="Sports,Games,Cinema"></label>
          <label>Managing Editor email (not recommended) <input type="email" inputmode="email" name="mEdit"></label>
          <label>Web Master email (not recommended) <input type="email" inputmode="email" name="webMast"></label>
          </fieldset>
          <p>As defined in <a href="https://www.rssboard.org/rss-specification" target="_blank">the specification</a>, &lt;item&gt; elements should be inside the &lt;channel&gt; tag, after all its other elements, and their order is not important.</p></span>
          <p>As defined in <a href="https://www.rssboard.org/rss-specification#hrelementsOfLtitemgt" target="_blank">the specification</a>, all elements of an item are optional, but it must contain either a title or description. I recommend including all of these (except stated otherwise):</p>
          <fieldset name="item"><legend>Item/Article data</legend>
          <label>Title <input type="text" name="title" placeholder="Interesting article" required></label>
          <label>Link to the article <input type="url" autocomplete="url" inputmode="url" name="link" placeholder="https://www.johndoe.org/interesting-article"></label>
          <label>Description or headline <input type="text" name="desc" placeholder="An interesting article about interesting topics"></label>
          <label>Content (HTML or plain text) <textarea name="content" placeholder="When inputing HTML, make sure to change relative URL's to absolute ones and to only enter the article part of the page, meaning no navbars, footers, <script> or <style> tags"></textarea></label>
          <label>Author's email (not recommended) <input type="email" inputmode="email" name="author"></label>
          <label>Categories or tags (comma separated) <input type="text" name="tags" placeholder="Sports,Games,Cinema"></label>
          </fieldset>
          <span style="align-self:center;"><div id="res-box"><label style="margin-block-start:1rem">Result <textarea name="result" placeholder="RSS result here" readonly ></textarea></label>
          <button id="copy" type="button">Copy result to clipboard</button></div>
          <div>If you don't want to use the current date, please change the &lt;pubDate&gt; tag with a RFC 2822 date. You can use <a href="https://timestampgenerator.com/" target="_blank">timestamp&shy;generator</a>.</div>
          <button style="width:49%;display:none" id="validate" type="button" class="blue-button">Validate generated feed (on primary validation pass, it will use <a href="https://www.rssboard.org/rss-validator/" target="_blank">the RSS Board's validator</a>)</button>
          <button style="width:49%;display:none" id="validateURL" type="button" class="blue-button">Validate the feed provided in "Link to the .xml file" using <a href="https://www.rssboard.org/rss-validator/" target="_blank">the RSS Board's validator</a></button></span>
        </form>
        <script>const form=document.querySelector('form');const result=document.getElementsByName("result")[0];
        let item, channel, chTitle, chDesc, chLink, imURL, imDesc, imHeight, imWidth, chaLink, chTags, mEdit, webMast, lang, title, link, desc, content, author, tags;
        for(fieldset of form.children){if(fieldset.name==='item')item=fieldset;else if(fieldset.localName==="span"&&fieldset.id==="Channel"){channel=fieldset.children[1]}}
        for(ch of item.children){switch(ch.children[0]?.name){case 'title': title=ch.children[0];break;case 'link': link=ch.children[0];break;case 'desc': desc=ch.children[0];break;case 'content': content=ch.children[0];break;case 'author': author=ch.children[0];break;case 'tags': tags=ch.children[0];break;default:}}
        content.style.height="1px";content.style.height=(content.scrollHeight)+"px";
        function ParseItem(){let RSStext="";
          if(title.value!=="")RSStext="\n\t<title>"+title.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;")+"</title>";
          let guid="";if(link.value!==""){RSStext+="\n\t<link>"+link.value+"</link>";guid="\n\t<guid>"+link.value+"</guid>"}
          if(desc.value!=="")RSStext+="\n\t<description>"+desc.value+"</description>";
          if(content.value!==""){RSStext+="\n\t<content:encoded> <![CDATA[ \n\t\t"+content.value+"\n\t]]> </content:encoded>";}
          if(author.value!=="")RSStext+="\n\t<author>"+author.value+"</author>";
          if(tags.value!==""){let tagarr=tags.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;").split(",");for(tag of tagarr){RSStext+="\n\t<category>"+tag+"</category>";}}
          if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t<pubDate>"+now+"</pubDate>";RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>";}
          return RSStext;
        }
        for(ch of channel.children){if(ch.localName==="span"){imWidth=ch.children[0].children[0];imHeight=ch.children[1].children[0];}switch(ch.children[0]?.name){case 'title': chTitle=ch.children[0];break;case 'link': chLink=ch.children[0];break;case 'desc': chDesc=ch.children[0];break;case 'imURL': imURL=ch.children[0];break;case 'imDesc': imDesc=ch.children[0];break;case 'imHeight': imHeight=ch.children[0];break;case 'imWidth': imWidth=ch.children[0];case 'tags': chTags=ch.children[0];break;case 'atomLink': chaLink=ch.children[0];break;case 'lang': lang=ch.children[0];break;case 'mEdit': mEdit=ch.children[0];break;case 'webMast': webMast=ch.children[0];break;default:}}
        const imCheck=document.querySelector('input[type="checkbox"][name="imCheck"]');
        if(imCheck)imCheck.addEventListener('input', (event)=>{if(event.target.checked){imWidth.parentNode.style.display="unset";imHeight.parentNode.style.display="unset";imURL.parentNode.style.display="unset";imDesc.parentNode.style.display="unset";imURL.required=true;}else{imWidth.parentNode.style.display="none";imHeight.parentNode.style.display="none";imURL.parentNode.style.display="none";imDesc.parentNode.style.display="none";imURL.required=false;}updateRes();});
        function ParseChannel(){let RSStext="";
          if(chTitle.value!=="")RSStext="\n\t\t<title>"+chTitle.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;")+"</title>";
          if(chLink.value!==""){RSStext+="\n\t\t<link>"+chLink.value+"</link>";}
          if(chDesc.value!=="")RSStext+="\n\t\t<description>"+chDesc.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;")+"</description>";
          if(imCheck.checked){RSStext+="\n\t\t<image>";if(imURL.value!==""){RSStext+="\n\t\t\t<url>"+imURL.value+"</url>\n\t\t\t<title>"+chTitle.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;")+"</title>\n\t\t\t<link>"+chLink.value+"</link>";}if(imDesc.value!==""){RSStext+="\n\t\t\t<description>"+imDesc.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;")+"</description>";}if(imWidth.value!==""){RSStext+="\n\t\t\t<width>"+imWidth.value+"</width>";}if(imHeight.value!==""){RSStext+="\n\t\t\t<width>"+imHeight.value+"</width>";}RSStext+="\n\t\t</image>";}
          if(mEdit.value!=="")RSStext+="\n\t\t<managingEditor>"+mEdit.value+"</managingEditor>";
          if(webMast.value!=="")RSStext+="\n\t\t<webMaster>"+webMast.value+"</webMaster>";
          if(chTags.value!==""){let tagarr=chTags.value.replaceAll("&","&#x26;").replaceAll("<","&#x3C;").replaceAll(">","&#x3E;").split(",");for(tag of tagarr){RSStext+="\n\t\t<category>"+tag+"</category>";}}
          if(lang.value!=="")RSStext+="\n\t\t<language>"+lang.value+"</language>";
          if(chaLink.value!=="")RSStext+='\n\t\t<atom:link href="'+chaLink.value+'" rel="self" type="application/rss+xml"/>';
          if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t\t<pubDate>"+now+"</pubDate>\n\t\t<lastBuildDate>"+now+"</lastBuildDate>\n\t\t<docs>https://www.rssboard.org/rss-specification</docs>\n\t\t<generator>KB's RSS feed generator v0.1 (https://kbs-lucas.neocities.org/tools/RSS-Generator)</generator>";
          }
          let itemRSS=ParseItem();
          if(itemRSS!=="")RSStext+="\n\t\t"+itemRSS.replaceAll("\n","\n\t\t");
          if(RSStext!==""){RSStext='<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">\n\t<channel>'+RSStext;RSStext+="\n\t</channel>\n</rss>";}
          return RSStext;
        }
        
        function updateRes(){if(chanCheck.checked){result.value=ParseChannel()}else{result.value=ParseItem();}result.style.height="1px";result.style.height=(result.scrollHeight)+"px";}
        const channelInput=document.getElementById('Channel');
        const valBtn=document.getElementById('validate');
        const valURLBtn=document.getElementById('validateURL');
        const chanCheck=document.querySelector('input[type="checkbox"][name="chanCheck"]');
        chanCheck.addEventListener('input', (event)=>{if(event.target.checked){channelInput.style.display="unset";valBtn.style.display="unset";valURLBtn.style.display="unset";title.required=false;}else{channelInput.style.display="none";valBtn.style.display="none";valURLBtn.style.display="none";title.required=true;}updateRes();});
        const itemFields=[title, link, desc, author, tags];
        const Fields=[chTitle, chLink, chDesc, chaLink, chTags, mEdit, imURL, imDesc, imHeight, imWidth, webMast, lang, ...itemFields];
        Fields.forEach((elem)=>{elem.addEventListener("input", updateRes);});
        content.addEventListener('input', (event)=>{event.target.style.height="1px";event.target.style.height=(event.target.scrollHeight)+"px";updateRes();})
        title.addEventListener('blur', (event)=>{event.target.reportValidity();});
        content.addEventListener('blur', (event)=>{
          if(content.value.includes("<style>")||content.value.includes("<script>")){content.setCustomValidity("Don't use <style> or <script> tags, they probably wont be used");content.reportValidity();}else{content.setCustomValidity("");}
        });
        lang.addEventListener('invalid', (event)=>{event.target.setCustomValidity('Please enter a valid RFC 5646/BCP 47 language code');});
        const copyBtn=document.getElementById('copy');
        copyBtn.addEventListener('click', (event)=>{navigator.clipboard.writeText(result.value).then((e)=>{console.log("copied!");event.target.innerText="Copied!";setTimeout(function(){this.innerText="Copy result to clipboard";}.bind(event.target), 3000);}).catch((error)=>{console.error(error);});});
        function validateRSSBoard(link, mode=false){
          const checker=new URL("https://www.rssboard.org/rss-validator/check.cgi");const params=new URLSearchParams(checker.search);
          mode?params.append("url", link.value):params.append("rawdata", result.value);
          window.open(checker.toString()+"?"+params.toString());
        }
        valBtn.addEventListener('click', (event)=>{if(chanCheck.checked){form.reportValidity();validateRSSBoard(chaLink);}else{itemFields.forEach((e)=>{e.reportValidity();});}});
        valURLBtn.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,true);}}});
        </script>
        <p>TODO/Future enhancements (in order of importance):
        <ol>
          <li>✓ DONE! Support channel's image tag</li>
          <li>Detect relative URL's on Content field and notify the user</li>
          <li>Support comments tag</li>
          <li>Support skipDays, skipHours and ttl tags, preferrably with native HTML date pickers</li>
          <li>Support enclosure tag (very niche use case)</li>
        </ol></p>
        <p>Privacy notice: This demo runs entirely within your browser. In other words, no data is sent to me, the code is sent to your browser and runs locally. You could theoretically load the page, cut your network connection and then start it.</p>
        </div>
      </article>
    </main>
    <footer id="footer">
      <p>This webpage's HTML is licensed under a MIT license, CSS and site contents are protected by copyright&copy; law. <br></p>
      <p><a href="#">Back to top</a></p>
    </footer>
    <script defer src="/scripts/window.js"></script>
  </body>
</html>