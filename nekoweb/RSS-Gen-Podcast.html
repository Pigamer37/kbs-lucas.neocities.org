<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>KB's RSS Generator for Podcasts</title>
    <link rel="icon" type="image/x-icon" href="https://kbs-lucas.neocities.org/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="An online RSS podcast feed generator" />
<!-- Social media stuff -->
    <meta property="og:title" content="KB's RSS Generator for Podcasts" />
    <meta property="og:description" content="An online RSS podcast feed generator" />
    <meta property="og:image" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta property="og:image:alt" content="Preview image" />
    
    <meta name="twitter:title" content="KB's RSS Generator for Podcasts" />
    <meta name="twitter:description" content="An online RSS podcast feed generator" />
    <meta name="twitter:url" content="https://kbs-lucas.neocities.org/?src=twitter" />
    <meta name="twitter:image:src" content="https://kbs-lucas.neocities.org/images/twitter_preview.png" />
    <meta name="twitter:image:alt" content="27 different home appliances" />
    <meta name="twitter:creator" content="@KBs__Lucas" />
    <meta name="twitter:site" content="@KBs__Lucas" />
<!-- Social media end -->
    <link href="https://kbs-lucas.neocities.org/window.css" rel="stylesheet" type="text/css" media="all">
    <meta name="theme-color" content="#ff9933" />
    <link href="https://kbs-lucas.neocities.org/styles/UI.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" type="image/png" href="https://kbs-lucas.neocities.org/images/favicon.png" />
    <link rel="canonical" href="https://kbs-lucas.nekoweb.org/RSS-Gen-Podcast" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://kbs-lucas.neocities.org/RSS.xml">
    <script src="https://kbs-lucas.neocities.org/scripts/user-color.js"></script>
  </head>
  <body>
    <header>
      <nav class="window" id="navigation" role="menubar" tabindex="0">
        <div class="title-bar">
          <span class="title">Site Content Navigation</span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">âœ•</button>
          </div>
        </div>
        <div class="content">
          <ul role="list">
            <li><a class="no-external" href="https://kbs-lucas.neocities.org/index" role="menuitem" tabindex="0" style="margin:1ch">Home</a>
            <li><a class="no-external" href="https://kbs-lucas.neocities.org/es" hreflang="es-ES" lang="es-ES" role="menuitem" tabindex="0" style="margin: 1ch">PÃ¡gina en EspaÃ±ol</a>
            <li><a class="no-external" href="https://kbs-lucas.neocities.org/posts" role="menuitem" tabindex="0" style="margin:1ch">Posts</a>
            <li><a class="no-external" href="https://kbs-lucas.neocities.org/socials" role="menuitem" tabindex="0" style="margin:1ch">Socials/Contact</a>
            <li><a class="no-external" href="https://kbs-lucas.neocities.org/about" role="menuitem" tabindex="0" style="margin:1ch">About</a>
            <li><a class="no-external" href="#footer" role="menuitem" tabindex="0" style="margin:1ch">More Info</a>
          </ul>
        </div>
      </nav>
    </header>
    <main>
    <style>form{display:flex;flex-direction:column;align-content:center;flex-wrap:wrap;& p,& > span,& > div{width:clamp(60px,100%,40rem);}& button{width:100%}}fieldset{box-sizing:border-box;display:flex;flex-direction:column;width:clamp(60px,100%,40rem);line-height:1.2;& input[type="text"],& input[type="url"],& input[type="email"],& input[type="number"]{width:100%;}& label{margin-block-end:1rem;&.half-w{width:50%;}}}textarea{tab-size:2;resize:vertical;width:100%;} #res-box{margin-block-end:1rem;color-scheme:light dark;background-color:light-dark(white,rgb(13 18 28));border:1px solid light-dark(white, black);overflow:hidden;border-radius:0 0 1rem 1rem;& label{margin-inline:14px}& label textarea{width:calc(100% - 28px);resize:none;margin-inline:14px;}& #copy,#fileDwld{font-weight:bold;border:.1em solid black;height:max(1rem,32px);background-color:blue;color:white;}}#epType{color:inherit}label:has(input,textarea,select){&.recommended:before{content:"+ ";color:blue}}/*#copy:before{content:'';mask-image: url(https://developer.mozilla.org/static/media/clippy.92fffda9d37d9c3a3b37.svg);}*/
    li.todo{&::marker{content:counter(list-item)". [   ] "}&.done{&::marker{content:counter(list-item)". [âœ“] ";color:chartreuse}}&.wont{&::marker{content:counter(list-item)". [âœ—] ";color:red}}</style>
    <h1 style="display:flex;justify-content:center;">KB's RSS Generator for Podcasts</h1>
     <article class="window" id="main_win">
        <div class="title-bar">
          <span class="title">KB's RSS feed generator for podcasts<noscript style="color:red">JavaScript is off</noscript></span>
          <div class="buttons">
            <button tabindex="-1">_</button>
            <button tabindex="-1">&#x26F6;</button>
            <button tabindex="-1">âœ•</button>
          </div>
        </div>
        <div class="content">
        <noscript><p style="color:red;margin-block-end=0.625rem;">JavaScript is off, this demo won't load or work without it... sorry!</p></noscript>
        <form id="RSS-input">
          <p>To make standard RSS feeds, use <a href="/RSS-Generator.html">this version</a>.</p>
          <p>Fields marked with <span style="color:red">*</span> are required, and ones marked with <span style="color:blue">+</span> are not technically required, but I'd strongly recomend adding them.</p>
          <label><input type="checkbox" name="chanCheck"> I need to define my RSS channel too </label>
          <p>If you are starting from scratch, you will need to make your RSS channel. Maybe you want to <a href="#fetchFeed" onclick="revChan()">copy and edit an existing feed</a> for reference. You only need to do this once for each podcast (not each episode), and when it's done you'll only need to add your items/episodes inside it.</p>
          <span id="Channel" name="channel" style="display:none"><p style="dis">As defined in <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=Show%20tags,%3Cchannel%3E,-The" target="_blank">the specification</a>, a podcast's channel must have the title, description, image, language, category and &lt;itunes:explicit&gt; elements, and at least one item:</p>
          <fieldset name="channel"><legend>Podcast/Channel data</legend>
          <label>Title of the podcast <input type="text" name="title" placeholder="The John Doe Podcast" required maxlength="255"></label>
          <label class="recommended">Podcast Author(s) <input type="text" name="podAuthor" placeholder="John Doe" maxlength="255"></label>
          <label class="recommended">Link to the podcast (if it has a website or similar) <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org/podcast" name="link" maxlength="255"></label>
          <label class="recommended" id="chaLink" style="margin-block-end:0">Link to the .xml file where this feed will be available <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.johndoe.org/podcast/RSS.xml" name="atomLink" maxlength="255"></label>
          <button type="button" class="blue-button" id="fetchFeed">Copy this feed's contents to the generator</button><span style="margin-block-end:1rem">(goes through <a href="https://test.cors.workers.dev/?" target="_blank">3rd party proxy</a>)</span>
          <label>Description <input type="text" name="desc" placeholder="A comedy podcast made by John Doe, about basketball and soccer and video games" required maxlength="1000"></label>
          Image / Show artwork:
          <label>Image URL <input type="url" autocomplete="url" inputmode="url" title="Publicly available square JPEG or PNG URL between 1400 & 3000px" pattern="\S+[.](?:jpeg|png|JPEG|PNG)\s*$" placeholder="https://www.johndoe.org/img.[jpeg/png]" name="imURL" required maxlength="255">(goes through <a href="https://test.cors.workers.dev/?" target="_blank">3rd party proxy</a> for image validation)</label>
          <span id="imWidth" style="margin-block-end:1rem"><label>Image size (must be square, if equal to 3000px you can leave it blank) <input style="width:unset" type="number" min="1400" max="3000" size="4" step="1" name="imWidth" placeholder="In pixels"></label>
          </span>
          <label>Image description <input type="text" name="imDesc" placeholder="A podcast logo/artwork..." maxlength="255"></label>
          <label>Language <input type="text" name="lang" autocomplete="language" list="ISO639-1langs" title="Valid ISO 639-1 language" size="6" placeholder="en-US" pattern="^[a-z]{2,4}(-([A-Z]|[a-z]){2,3})?(-(([A-Z]|[a-z]){2}|[0-9]{3}))?$" required></label>
          <datalist id="ISO639-1langs">
            <option value="">Enter a language code</option><option value="aa">Afar</option><option value="ab">Abkhazian</option><option value="af">Afrikaans</option><option value="ak">Akan</option><option value="sq">Albanian</option><option value="am">Amharic</option><option value="ar">Arabic</option><option value="an">Aragonese</option><option value="hy">Armenian</option><option value="as">Assamese</option><option value="av">Avaric</option><option value="ae">Avestan</option><option value="ay">Aymara</option><option value="az">Azerbaijani</option><option value="ba">Bashkir</option><option value="bm">Bambara</option><option value="eu">Basque</option><option value="be">Belarusian</option><option value="bn">Bengali</option><option value="bi">Bislama</option><option value="bo">Tibetan</option><option value="bs">Bosnian</option><option value="br">Breton</option><option value="bg">Bulgarian</option><option value="my">Burmese</option><option value="ca">Catalan; Valencian</option><option value="cs">Czech</option><option value="ch">Chamorro</option><option value="ce">Chechen</option><option value="zh">Chinese</option><option value="cu">Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic</option><option value="cv">Chuvash</option><option value="kw">Cornish</option><option value="co">Corsican</option><option value="cr">Cree</option><option value="cy">Welsh</option><option value="cs">Czech</option><option value="da">Danish</option><option value="de">German</option><option value="dv">Divehi; Dhivehi; Maldivian</option><option value="nl">Dutch; Flemish</option><option value="dz">Dzongkha</option><option value="el">Greek, Modern (1453-)</option><option value="en">English</option><option value="eo">Esperanto</option><option value="et">Estonian</option><option value="eu">Basque</option><option value="ee">Ewe</option><option value="fo">Faroese</option><option value="fa">Persian</option><option value="fj">Fijian</option><option value="fi">Finnish</option><option value="fr">French</option><option value="fy">Western Frisian</option><option value="ff">Fulah</option><option value="ka">Georgian</option><option value="de">German</option><option value="gd">Gaelic; Scottish Gaelic</option><option value="ga">Irish</option><option value="gl">Galician</option><option value="gv">Manx</option><option value="el">Greek, Modern (1453-)</option><option value="gn">Guarani</option><option value="gu">Gujarati</option><option value="ht">Haitian; Haitian Creole</option><option value="ha">Hausa</option><option value="he">Hebrew</option><option value="hz">Herero</option><option value="hi">Hindi</option><option value="ho">Hiri Motu</option><option value="hr">Croatian</option><option value="hu">Hungarian</option><option value="hy">Armenian</option><option value="ig">Igbo</option><option value="is">Icelandic</option><option value="io">Ido</option><option value="ii">Sichuan Yi; Nuosu</option><option value="iu">Inuktitut</option><option value="ie">Interlingue; Occidental</option><option value="ia">Interlingua (International Auxiliary Language Association)</option><option value="id">Indonesian</option><option value="ik">Inupiaq</option><option value="is">Icelandic</option><option value="it">Italian</option><option value="jv">Javanese</option><option value="ja">Japanese</option><option value="kl">Kalaallisut; Greenlandic</option><option value="kn">Kannada</option><option value="ks">Kashmiri</option><option value="ka">Georgian</option><option value="kr">Kanuri</option><option value="kk">Kazakh</option><option value="km">Central Khmer</option><option value="ki">Kikuyu; Gikuyu</option><option value="rw">Kinyarwanda</option><option value="ky">Kirghiz; Kyrgyz</option><option value="kv">Komi</option><option value="kg">Kongo</option><option value="ko">Korean</option><option value="kj">Kuanyama; Kwanyama</option><option value="ku">Kurdish</option><option value="lo">Lao</option><option value="la">Latin</option><option value="lv">Latvian</option><option value="li">Limburgan; Limburger; Limburgish</option><option value="ln">Lingala</option><option value="lt">Lithuanian</option><option value="lb">Luxembourgish; Letzeburgesch</option><option value="lu">Luba-Katanga</option><option value="lg">Ganda</option><option value="mk">Macedonian</option><option value="mh">Marshallese</option><option value="ml">Malayalam</option><option value="mi">Maori</option><option value="mr">Marathi</option><option value="ms">Malay</option><option value="mk">Macedonian</option><option value="mg">Malagasy</option><option value="mt">Maltese</option><option value="mn">Mongolian</option><option value="mi">Maori</option><option value="ms">Malay</option><option value="my">Burmese</option><option value="na">Nauru</option><option value="nv">Navajo; Navaho</option><option value="nr">Ndebele, South; South Ndebele</option><option value="nd">Ndebele, North; North Ndebele</option><option value="ng">Ndonga</option><option value="ne">Nepali</option><option value="nl">Dutch; Flemish</option><option value="nn">Norwegian Nynorsk; Nynorsk, Norwegian</option><option value="nb">BokmÃ¥l, Norwegian; Norwegian BokmÃ¥l</option><option value="no">Norwegian</option><option value="ny">Chichewa; Chewa; Nyanja</option><option value="oc">Occitan (post 1500)</option><option value="oj">Ojibwa</option><option value="or">Oriya</option><option value="om">Oromo</option><option value="os">Ossetian; Ossetic</option><option value="pa">Panjabi; Punjabi</option><option value="fa">Persian</option><option value="pi">Pali</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ps">Pushto; Pashto</option><option value="qu">Quechua</option><option value="rm">Romansh</option><option value="ro">Romanian; Moldavian; Moldovan</option><option value="rn">Rundi</option><option value="ru">Russian</option><option value="sg">Sango</option><option value="sa">Sanskrit</option><option value="si">Sinhala; Sinhalese</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="se">Northern Sami</option><option value="sm">Samoan</option><option value="sn">Shona</option><option value="sd">Sindhi</option><option value="so">Somali</option><option value="st">Sotho, Southern</option><option value="es">Spanish; Castilian</option><option value="sq">Albanian</option><option value="sc">Sardinian</option><option value="sr">Serbian</option><option value="ss">Swati</option><option value="su">Sundanese</option><option value="sw">Swahili</option><option value="sv">Swedish</option><option value="ty">Tahitian</option><option value="ta">Tamil</option><option value="tt">Tatar</option><option value="te">Telugu</option><option value="tg">Tajik</option><option value="tl">Tagalog</option><option value="th">Thai</option><option value="bo">Tibetan</option><option value="ti">Tigrinya</option><option value="to">Tonga (Tonga Islands)</option><option value="tn">Tswana</option><option value="ts">Tsonga</option><option value="tk">Turkmen</option><option value="tr">Turkish</option><option value="tw">Twi</option><option value="ug">Uighur; Uyghur</option><option value="uk">Ukrainian</option><option value="ur">Urdu</option><option value="uz">Uzbek</option><option value="ve">Venda</option><option value="vi">Vietnamese</option><option value="vo">VolapÃ¼k</option><option value="cy">Welsh</option><option value="wa">Walloon</option><option value="wo">Wolof</option><option value="xh">Xhosa</option><option value="yi">Yiddish</option><option value="yo">Yoruba</option><option value="za">Zhuang; Chuang</option><option value="zh">Chinese</option><option value="zu">Zulu</option>
          </datalist>
          <label><input type="checkbox" name="explicit" required> This podcast is explicit </label>
          <a href="https://podcasters.apple.com/support/1691-apple-podcasts-categories" target="_blank">Available categories</a>
          <label>Categories or tags (comma separated) <input type="text" name="tags" placeholder="Sports0sub0Basketball0sub0Soccer,Leisure0sub0Video Games,Comedy" required></label>
          <label class="recommended">This podcast is <select name="Type" id="Type">
            <option value="episodic">episodic</option>
            <option value="serial">serial</option>
          </select>. Serial means episodes are meant to be consumed sequentially, and episodic without any specific order.<br>See <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=%3Citunes:type%3E,Learn%20more." target="_blank">this documentation</a> for more info</label>
          <label>Funding/patronage/membership link <input type="url" autocomplete="url" inputmode="url" placeholder="https://www.patreon.com/johndoe" name="funding" maxlength="255"></label>
          <label>Funding/patronage/membership text (max. 128 characters) <input type="text" maxlength="128" placeholder="Become a patreon!" name="fundTxt"></label>
          <span style="margin-block-end:1rem">If your podcast has multiple links for funding, please duplicate the &lt;podcast:funding&gt; tag generated changing the attribute(s)</span>
          <span>If your podcast already has been assigned a GUID, please input it here. Otherwise, it will be generated automatically based on <a href="#chaLink">your inputed feed link</a>, as mandated by <a target="_blank" href="https://podcasting2.org/podcast-namespace/tags/guid">the specification</a></span>
          <label>Manual guid <input type="text" placeholder="df13535d-6d6a-557f-90fb-bbbbc23722d7" maxlength="36" title="Valid GUID" pattern="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}" name="manguid"></label>
          <label><input type="checkbox" name="complete"> This podcast is complete / finished </label>
          <p>Note: <strong>emails on RSS feeds are a huge privacy concern</strong>, that's why they are explicitly marked as not recommended. For some reason, some platforms, like Spotify, <a href="https://support.spotify.com/us/creators/article/adding-your-email-address-to-your-rss-feed/" target="_blank">require you to add an email adress to verify and add your feed</a> inside an &lt;itunes:email&gt; tag. I'd recommend adding your email temporarily, verifying and then removing it as quickly as possible, because anyone with a link to your feed can see its contents!</p>
          <label>Managing Editor email (not recommended) <input type="email" inputmode="email" name="mEdit" maxlength="255"></label>
          <label>Web Master email (not recommended) <input type="email" inputmode="email" name="webMast" maxlength="255"></label>
          <label>Hours where channel won't be updated in GMT (not recommended) <input type="time" step="3600" name="skipHours" id="skipHours"></label>
          <button id="skipHB" type="button" class="blue-button">Add hour</button>
          <label style="margin-block-start:1rem">Days where channel won't be updated (not recommended)</label>
          <button id="skipMon" type="button" class="blue-button">Skip Monday</button>
          <button id="skipTue" type="button" class="blue-button">Skip Tuesday</button>
          <button id="skipWed" type="button" class="blue-button">Skip Wednesday</button>
          <button id="skipThu" type="button" class="blue-button">Skip Thursday</button>
          <button id="skipFri" type="button" class="blue-button">Skip Friday</button>
          <button id="skipSat" type="button" class="blue-button">Skip Saturday</button>
          <button id="skipSun" type="button" class="blue-button" style="margin-block-end:1rem">Skip Sunday</button>
          <label>Time to live (<abbr>ttl</abbr>): how many minutes the channel can be cached before refreshing from the source (not recommended)<input type="number" min="0" step="1" name="ttl" placeholder="Ex: 60 (1 hour), use 0 to disable"></label>
          </fieldset>
          <p>As defined in <a href="https://www.rssboard.org/rss-specification" target="_blank">the RSS specification</a>, &lt;item&gt; elements should be inside the &lt;channel&gt; tag, after all its other elements, and their order is not important. However, I recommend ordering items by date, keeping newer ones near the top, just to be consistent.</p>
          </span>
          <p>As defined in <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=Episode%20tags,%3Citem%3E,-Apple" target="_blank">the Apple Podcasts specification</a>, there must be at least one &lt;item&gt; element, meaning at least one episode, and it must contain at least a title, enclosure (the file for the podcast) and guid (basically a link or a unique identifier for the episode). I recommend including all of these (except stated otherwise):</p>
          <fieldset name="item"><legend>Item/Episode data</legend>
          <label>This item is a <select name="epType" id="epType">
            <option value="full">full episode</option>
            <option value="trailer">trailer</option>
            <option value="bonus">bonus episode</option>
          </select><br>See <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=%3Citunes:episodeType%3E,specific%20episode" target="_blank">this documentation</a> for more info</label>
          <label>Title (don't include season or episode numbers)<input type="text" name="title" placeholder="Interesting episode" required maxlength="255"></label>
          <label class="recommended">Link to the episode's webpage or similar <input type="url" autocomplete="url" inputmode="url" name="link" placeholder="https://www.johndoe.org/podcast/episode1" maxlength="255"> (if not provided, the <a href="#EpFileURL">episode file URL</a> is used as the episode's unique permanent identifier or guid instead)</label>
          <label class="recommended">Description / summary / show notes <input type="text" name="desc" placeholder="An interesting episode about interesting topics" maxlength="1000"> <a href="https://support.spotify.com/us/creators/article/formatting-your-show-notes/" target="_blank"><strong>Some</strong> platforms support minimal HTML here</a> </label>
          <span id="sep" style="width:100%;display:flex;flex-wrap:wrap;flex:1;justify-content:space-between"><label class="half-w">Season number <input type="number" min="1" step="1" name="season" placeholder="1"></label>
          <label class="half-w">Episode number <input type="number" min="1" step="1" name="episode" placeholder="1"></label></span>
          Episode files:
          <label id="EpFileURL">Episode file URL <input type="url" autocomplete="url" inputmode="url" name="content" placeholder="https://www.johndoe.org/podcast/episode1.[M4A|MP3|MOV|MP4|M4V|PDF]" required maxlength="255">(goes through <a href="https://test.cors.workers.dev/?" target="_blank">3rd party proxy</a>)</label>
          <p>If you get an error, or you want to inlcude the duration of the file as metadata, <strong>also</strong> use:</p>
          <label class="recommended">Episode file (doesn't get uploaded anywhere) <input type="file" name="encFile" accept="audio/x-m4a,audio/mpeg,video/quicktime,video/mp4,video/x-m4v,application/pdf"><div class="dropZone">Or drop file here</div></label>
          Image / Episode specific artwork:
          <label class="recommended">Image URL <input type="url" autocomplete="url" inputmode="url" title="Publicly available square JPEG or PNG URL between 1400 & 3000px" pattern="\S+[.](?:jpeg|png|JPEG|PNG)\s*$" placeholder="https://www.johndoe.org/Episode1Img.[jpeg/png]" name="epImURL" maxlength="255">(goes through <a href="https://test.cors.workers.dev/?" target="_blank">3rd party proxy</a> for image validation)</label>
          <label class="recommended"><input type="checkbox" name="explicEP"> This episode is explicit </label>
          <p>Note that Itunes only supports embedded chapters on the episode file and <a href="https://support.spotify.com/us/creators/article/creating-and-managing-chapters/" target="_blank">Spotify requires you to use their proprietary tool or format the episode's description</a> ðŸ˜¡.</p>
          <label>Episode chapters URL <input type="url" autocomplete="url" inputmode="url" name="chapURL" title="URL to a CORS accessible JSON file" pattern="\S+[.](?:json|JSON)\s*$" placeholder="https://www.johndoe.org/podcast/chapters-ep1.json" maxlength="255">(must meet <a href="https://github.com/Podcastindex-org/podcast-namespace/blob/main/chapters/jsonChapters.md" target="_blank">some requirements</a>) See <a href="#chapterTool">below</a> for a free tool to generate chapters and more documentation </label>
          <span style="margin-block-end:1rem"><span style="color:blue">+</span> Episode transcription(s) (see <a href="#subParag">*</a> for a list of tools to get transcription files). Note that transcription files can be HTML, JSON, VTT or STR files, but Itunes will only accept VTT or SRT, and that Spotify doesn't support this at all atm (not cool ðŸ˜¡):</span>
          <label>Episode transcription URL <input type="url" autocomplete="url" inputmode="url" name="transURL" title="URL to a CORS accessible HTML, JSON, SRT or VTT file" pattern="\S+[.](?:html|htm|json|srt|vtt|HTML|HTM|JSON|SRT|VTT)\s*$" placeholder="https://www.johndoe.org/podcast/subtitles-ep1.json" maxlength="255">(must meet <a href="https://github.com/Podcastindex-org/podcast-namespace/blob/main/transcripts/transcripts.md" target="_blank">some requirements</a>)</label>
          <p>Or if you get an error, <strong>also</strong> use:</p>
          <label>Episode transcription file (doesn't get uploaded anywhere) <input type="file" name="transFile" accept="text/plain,text/html,text/vtt,application/json,application/x-subrip,.srt"><div class="dropZone">Or drop file here</div></label>
          <label>Transcription language (if it's not specified, it's assumed to be the same as the podcast's language) <input style="width:unset" type="text" name="transLang" autocomplete="language" list="ISO639-1langs" title="Valid ISO 639-1 language or empty for default podcast language" size="6" placeholder="en-US" pattern="^[a-z]{2,4}(-[A-Z][a-z]{3})?(-([A-Z]{2}|[0-9]{3}))?$"></label>
          <label><input type="checkbox" name="transCC"> <strong>Force</strong> this file to be read as closed captions (some file types are interpreted as CC automatically, because they have timing info intrinsically) </label>
          <button id="addTrans" type="button" class="blue-button">Add to transcript list</button>
          <button id="resetTrans" type="button" class="blue-button" style="background-color:red">Reset transcript list</button>
          </fieldset>
          <span style="align-self:center;"><div id="res-box"><output form="RSS-input"><label style="margin-block-start:1rem">Result <textarea class="CascadiaCode" name="result" placeholder="RSS result here. You can drop a .xml file or text selection here to process it" readonly></textarea></output></label>
          <button id="fileDwld" type="button">Download result as a file</button>
          <button id="copy" type="button">Copy result to clipboard</button></div>
          <div>If you don't want to use the current date, please change the &lt;pubDate&gt; and &lt;lastBuildDate&gt; tags with a RFC 2822 date. You can use <a href="https://timestampgenerator.com/" target="_blank">timestamp&shy;generator</a>.</div>
          <button style="width:49%;display:none" id="validateURL" type="button" class="blue-button">Validate the feed provided in <a href="#chaLink">"Link to the .xml file"</a> using <a href="https://podba.se/validate/" target="_blank">the podbase validator</a></button>
          <button style="width:49%;display:none" id="validate" type="button" class="blue-button">Validate the feed provided in <a href="#chaLink">"Link to the .xml file"</a> using <a href="https://www.castfeedvalidator.com/validate.php" target="_blank">Cast Feed Validator</a></button>
          <button style="width:49%;display:none" id="validLivewire" type="button" class="blue-button">Validate the feed provided in <a href="#chaLink">"Link to the .xml file"</a> using <a href="https://www.castfeedvalidator.com/validate.php" target="_blank">the Livewire validator</a></button>
          <button style="width:49%;display:none" id="validTF" type="button" class="blue-button">Validate the feed provided in <a href="#chaLink">"Link to the .xml file"</a> using <a href="https://validator.truefans.fm/" target="_blank">the TrueFans validator</a></button>
          <button style="display:none" id="validApple" type="button" class="blue-button">Validate the feed provided in <a href="#chaLink">"Link to the .xml file"</a> using <a href="https://podcastsconnect.apple.com/my-podcasts/new-feed" target="_blank">the official Apple Podcast Connect validator</a></button>
          <button style="display:none" id="validPodbaseRaw" type="button" class="blue-button">Validate the result using <a href="https://podba.se/validate/" target="_blank">the podbase validator</a></button>
          <p style="display:none" id="valParag">If using this last validation method, ignore all errors regarding HTTPS, HEAD requests, the feed URL and byte-range support (they get triggered intrinsically). I also found that it may mistakenly report your episode artwork as missing. You should include <a href="#chaLink">a link to your feed</a> anyways (not including it also triggers some errors regarding the Atom namespace).</p></span>
        </form>
        <script>function replacespecialChars(str){if(typeof str!=='string')return;
          return str.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("â€™","&apos;").replaceAll("â€œ","&quot;").replaceAll("Â©","&#xA9;").replaceAll("â„—","&#x2117;").replaceAll("â„¢","&#x2122;");}
        const form=document.querySelector('form');const result=document.getElementsByName("result")[0];
        const epType=document.getElementById('epType');const podType=document.getElementById('Type');
        const sep=document.getElementById('sep');const episode=sep.children[1].children.namedItem('episode');const season=sep.children[0].children.namedItem('season');
        let item, channel, chTitle, chDesc, chLink, imURL, imDesc, imWidth, chaLink, chTags, mEdit, webMast, podAuthor, fund, fundTxt, manguid, lang, explicit, explicEP, complete, title, link, desc, content, encFile, epImURL, chapURL, transURL, transFile, transLang, transCC;
        let skipHB, skipMon, skipTue, skipWed, skipThu, skipFri, skipSat, skipSun, ttl;
        let skipHoursStr="";
        let dayBools = new Array(7);dayBools.fill(false);
        for(fieldset of form.children){if(fieldset.name==='item')item=fieldset;else if(fieldset.localName==="span"&&fieldset.id==="Channel"){channel=fieldset.children[1]}}
        for(ch of item.children){switch(ch.children[0]?.name){case 'title': title=ch.children[0];break;case 'link': link=ch.children[0];break;case 'desc': desc=ch.children[0];break;case 'content': content=ch.children[0];break;case 'encFile': encFile=ch.children[0];break;case 'epImURL': epImURL=ch.children[0];break;case 'explicEP': explicEP=ch.children[0];break;case 'chapURL': chapURL=ch.children[0];break;case 'transURL': transURL=ch.children[0];break;case 'transFile': transFile=ch.children[0];break;case 'transLang': transLang=ch.children[0];break;case 'transCC': transCC=ch.children[0];break;default:}}
        function getPromiseFromEvent(item, event) {
          return new Promise((resolve)=>{
            const listener=()=>{
              item.removeEventListener(event, listener);
              resolve();
            }
            item.addEventListener(event, listener);
          })
        }
        function GetDuration(file){return new Promise((resolve, reject)=>{
            if(file===undefined){reject(-1);return}
            if(file.type.includes("audio")){
                let a=new Audio(URL.createObjectURL(file));a.preload='metadata';
                new Promise((reso)=>{
                  const listener=()=>{
                    a.removeEventListener('loadedmetadata',listener);
                    URL.revokeObjectURL(a.src);
                    reso(Math.round(a.duration));
                  }
                  a.addEventListener('loadedmetadata',listener);
                  a.src=URL.createObjectURL(file);
                }).then(e=>{resolve(e);console.log("Duration (audio): ",e);})
            }else if(file.type.includes("video")){let vid=document.createElement('video');vid.preload='metadata';
                new Promise((reso)=>{
                  const listener=()=>{
                    vid.removeEventListener('loadedmetadata',listener);
                    window.URL.revokeObjectURL(vid.src);
                    reso(Math.round(vid.duration));
                  }
                  vid.addEventListener('loadedmetadata',listener);
                  vid.src=URL.createObjectURL(file);
                }).then(e=>{resolve(e);console.log("Duration (video): ",e);})
            }else{reject(-1)}
        })
        }
        function IsValidType(blob, typesString){
            blob.type=blob.type.split(';')[0];//remove charsets
            return typesString.split(',').some((type)=>{if((blob.type.includes(type))||((blob?.name!==undefined)&&(blob.name.endsWith(type)))){return true}else{return false}})
        }
        let transList="";
        const addTrans=document.getElementById("addTrans");
        addTrans.addEventListener('click',(e)=>{
            if(transURL.value===""){transURL.setCustomValidity(`Please provide a URL to the transcript file`);transURL.reportValidity();return;}
            else if(!transURL.checkValidity()){transURL.reportValidity();return;}
            if(transLang.value!==""){if(!transLang.checkValidity()){transLang.reportValidity();return;}}
            const option={method:'HEAD',mode:'cors'};
            let blob=undefined;
            new Promise((res, rej)=>{
            addTrans.disabled=true;
            fetch(transURL.value.trim(),option).then(res=>{if(!res.ok){
              transURL.setCustomValidity(`Can't access file from this site (bad response)`);transURL.reportValidity();rej(transURL.validationMessage);
            }else{blob={type:res.headers.get('Content-Type')};if(!IsValidType(blob,transFile.accept)){transURL.setCustomValidity(`Filetype ${blob.type} is not valid, please provide a html, htm, json, srt or vtt file`);transURL.reportValidity();blob=undefined;rej(transURL.validationMessage);return}}
            }).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){
                transURL.setCustomValidity(`Can't access file from this site, probably due to CORS policies. If that's the case, you need to fix it!`);transURL.reportValidity();
            }else{transURL.setCustomValidity(e);transURL.reportValidity()}}).finally(e=>{
              if(blob===undefined){if(transFile.value!==""){blob={type:transFile.files[0].type};
                if(!IsValidType(blob,transFile.accept)){if(transFile.value.trim().endsWith(".srt")){blob.type="application/x-subrip"}else{transURL.setCustomValidity("");transFile.setCustomValidity(`Filetype ${blob.type} is not valid, please provide a html, htm, json, srt or vtt file`);transFile.reportValidity();blob=undefined;rej(transFile.validationMessage);return}}
              }else{rej("URL failed and didn't provide file");return}}
              transList+=`\n\t<podcast:transcript url="${transURL.value.trim()}" type="${blob.type}"`;
              if(transLang.value!==""){transList+=` language="${transLang.value.trim()}"`}
              if(transCC.checked){transList+=` rel="captions"`}
              transList+=` />`;
              updateRes();
              res(transList);
            });
            }).catch(e=>console.log("Caught rejection: ",e)).finally(()=>{addTrans.disabled=false;});
        });
        const resetTrans=document.getElementById("resetTrans");
        resetTrans.addEventListener('click',(e)=>{
          transList="";updateRes();
        });
        [transURL,content,chapURL].forEach((elem)=>{elem.addEventListener('input', (event)=>{event.target.setCustomValidity("")});transFile.addEventListener('change', (event)=>{event.target.setCustomValidity("")});});
        
        let itemEnc="",itemChap="",chanGUID="";
        function ParseItem(){
          let RSStext="",guid="";
          if(title.value.trim()!=="")RSStext="\n\t<title><![CDATA["+title.value.trim()+"]]></title>";
          if(link.value!==""){RSStext+="\n\t<link>"+link.value.trim()+"</link>";guid="\n\t<guid>"+link.value.trim()+"</guid>"}
          else if(content.value!==""){guid="\n\t<guid>"+content.value.trim()+"</guid>"}
          if(desc.value.trim()!=="")RSStext+="\n\t<description><![CDATA["+desc.value.trim()+"]]></description>";
          RSStext+="\n\t<itunes:explicit>";RSStext+=(explicEP.checked)?'true':'false';RSStext+='</itunes:explicit>';
          if(itemEnc!=="")RSStext+=itemEnc;
          if(itemChap!=="")RSStext+=itemChap;
          RSStext+=transList;
          let podTrailer="";
          if(epType.value!==""){RSStext+=`\n\t<itunes:episodeType>${epType.value}</itunes:episodeType>`;
              if((epType.value==="trailer")&&(episode.value==="")){//advise 128 char limit on title
                  podTrailer=`\n<podcast:trailer\n\tpubdate="${new Date().toUTCString()}"\n\t${itemEnc.substring(itemEnc.indexOf("url"),itemEnc.indexOf("/>")).replaceAll('\n\t','\n')}`;
                  if(season.value!==""){podTrailer+=`\tseason="${season.valueAsNumber}"\n`}
                  if(title.value.trim().length>128){title.setCustomValidity(`Title exceeds 128 characters (currently ${title.value.trim().length}) and thus it may be truncated on some platforms`)}
                  else{title.setCustomValidity("")}title.reportValidity();
                  podTrailer+=`><![CDATA[${title.value.trim()||'Trailer'}]]></podcast:trailer>`;
              }
          }
          if((season.value!=="")&&(season.value>0))RSStext+=`\n\t<itunes:season>${season.valueAsNumber}</itunes:season>\n\t<podcast:season>${season.valueAsNumber}</podcast:season>`;
          if((episode.value!=="")&&(episode.value>0))RSStext+=`\n\t<itunes:episode>${episode.valueAsNumber}</itunes:episode>\n\t<podcast:episode>${episode.valueAsNumber}</podcast:episode>`;
          if(epImURL.value!=="")RSStext+=`\n\t<itunes:image href="${epImURL.value.trim()}"/>`;
          if(RSStext!==""){RSStext+=`\n\t<pubDate>${new Date().toUTCString()}</pubDate>`;RSStext="<item>"+RSStext;RSStext+=guid+"\n</item>"+podTrailer;}
          return RSStext;
        }
        for(ch of channel.children){if((ch.localName==="span")&&(ch.id==="imWidth")){imWidth=ch.children[0].children[0];continue;}else if(ch.localName==="button"){
          switch(ch.id){case 'skipMon': skipMon=ch;break;case 'skipTue': skipTue=ch;break;case 'skipWed': skipWed=ch;break;case 'skipThu': skipThu=ch;break;case 'skipFri': skipFri=ch;break;case 'skipSat': skipSat=ch;break;case 'skipSun': skipSun=ch;break;case 'skipHB': skipHB=ch;break;default:}continue;
        }switch(ch.children[0]?.name){case 'title': chTitle=ch.children[0];break;case 'link': chLink=ch.children[0];break;case 'desc': chDesc=ch.children[0];break;case 'imURL': imURL=ch.children[0];break;case 'imDesc': imDesc=ch.children[0];break;case 'imWidth': imWidth=ch.children[0];case 'tags': chTags=ch.children[0];break;case 'funding': fund=ch.children[0];break;case 'fundTxt': fundTxt=ch.children[0];break;case 'manguid': manguid=ch.children[0];break;case 'atomLink': chaLink=ch.children[0];break;case 'lang': lang=ch.children[0];break;case 'mEdit': mEdit=ch.children[0];break;case 'webMast': webMast=ch.children[0];break;case 'podAuthor': podAuthor=ch.children[0];break;case 'explicit': explicit=ch.children[0];break;case 'complete': complete=ch.children[0];break;default:}if(ch.children[1]?.name==='ttl')ttl=ch.children[1];}
        const skipHours=document.getElementById("skipHours");
        skipHB.addEventListener("click", (e)=>{
          if((skipHours?.value!==undefined)&&(skipHours.value!=="")){
            const h=skipHours.value.slice(0,2);const hInt=parseInt(h);
            if((!skipHoursStr.includes(h))&&(!isNaN(hInt))){if(skipHoursStr==="")skipHoursStr="\n\t\t<skipHours>\n\t\t</skipHours>";
              skipHoursStr=`${skipHoursStr.slice(0, -15)}\n\t\t\t<hour>${h}</hour>\n\t\t</skipHours>`
            }
          }
          updateRes();
        })
        const DayButtons=[skipMon, skipTue, skipWed, skipThu, skipFri, skipSat, skipSun]
        for(let i=0;i<DayButtons.length;i++){DayButtons[i].addEventListener("click", (e)=>{
            dayBools[i]=!dayBools[i];
            if(dayBools[i])e.target.innerText="Don't "+e.target.innerText;
            else e.target.innerText=e.target.innerText.slice(6);
            updateRes();
          });
        }
        function ParseChannel(){
          let RSStext="",langChannel='';
        
          if(chTitle.value.trim()!=="")RSStext="\n\t\t<title><![CDATA["+chTitle.value.trim()+"]]></title>";
          if(chLink.value!=="")RSStext+="\n\t\t<link>"+chLink.value.trim()+"</link>";
          if(chaLink.value!=="")RSStext+='\n\t\t<atom:link href="'+chaLink.value.trim()+'" rel="self" type="application/rss+xml"/>';
          if(chDesc.value.trim()!=="")RSStext+="\n\t\t<description><![CDATA["+chDesc.value.trim()+"]]></description>";
          if(lang.value!==""){RSStext+="\n\t\t<language>"+lang.value.trim()+"</language>";langChannel=`xml:lang="${lang.value.trim()}" `}
          RSStext+="\n\t\t<itunes:explicit>";RSStext+=(explicit.checked)?'true':'false';RSStext+='</itunes:explicit>';
          RSStext+=`\n\t\t<itunes:type>${podType.value}</itunes:type>`;
          if(imURL.value!==""){RSStext+='\n\t\t<itunes:image href="'+imURL.value.trim()+'"/>';}
          if((imURL.value!=="")||(imDesc.value!=="")||(imWidth.value!=="")){
            RSStext+="\n\t\t<image>";if(imURL.value.trim()!==""){RSStext+="\n\t\t\t<url>"+imURL.value.trim()+"</url>\n\t\t\t<title><![CDATA["+chTitle.value.trim()+"]]></title>\n\t\t\t<link>"+chLink.value.trim()+"</link>";}if(imDesc.value.trim()!==""){RSStext+="\n\t\t\t<description><![CDATA["+imDesc.value.trim()+"]]></description>";}if(imWidth.value!==""){RSStext+="\n\t\t\t<width>"+imWidth.valueAsNumber+"</width>\n\t\t\t<height>"+imWidth.valueAsNumber+"</height>";}RSStext+="\n\t\t</image>";
          }
          if(mEdit.value!=="")RSStext+="\n\t\t<managingEditor>"+mEdit.value.trim()+"</managingEditor>";
          if(webMast.value!=="")RSStext+="\n\t\t<webMaster>"+webMast.value.trim()+"</webMaster>";
          if(podAuthor.value.trim()!=="")RSStext+='\n\t\t<itunes:author>'+replacespecialChars(podAuthor.value.trim())+'</itunes:author>';
          if(chTags.value.trim()!==""){let tagarr=replacespecialChars(chTags.value.trim()).split(",");for(tag of tagarr){RSStext+="\n\t\t<category>"+tag.replaceAll('0sub0','=>')+'</category>\n\t\t<itunes:category text="';
          if(tag.includes("0sub0")){let subtagarr=tag.split("0sub0");for(let i=0;i<subtagarr.length;i++){if(i===0){RSStext+=`${subtagarr[0]}">`}else{RSStext+=`\n\t\t\t<itunes:category text="${subtagarr[i]}" />`;}}RSStext+='\n\t\t</itunes:category>'}else{RSStext+=`${tag}" />`;}}}
          if(fund.value!==""){RSStext+=`\n\t\t<podcast:funding url="${fund.value.trim()}">${fundTxt.value.trim()}</podcast:funding>`}
          if(complete.checked)RSStext+="\n\t\t<itunes:complete>Yes</itunes:complete>";
          if(dayBools.find((e)=> e === true)!==undefined){
            RSStext+="\n\t\t<skipDays>";
            for(let i=0;i<dayBools.length;i++){
              if(dayBools[i]){RSStext+="\n\t\t\t<day>";switch(i){case 0: RSStext+="Monday";break;case 1: RSStext+="Tuesday";break;case 2: RSStext+="Wednesday";break;case 3: RSStext+="Thursday";break;case 4: RSStext+="Friday";break;case 5: RSStext+="Saturday";break;case 6: RSStext+="Sunday";break;default:}RSStext+="</day>";}
            }
            RSStext+="\n\t\t</skipDays>";
          }RSStext+=skipHoursStr;
          if((ttl?.value!==undefined)&&(!isNaN(ttl.valueAsNumber))&&(ttl.valueAsNumber>0))RSStext+=`\n\t\t<ttl>${ttl.valueAsNumber}</ttl>`;
          if(RSStext!==""){let now=new Date().toUTCString();RSStext+="\n\t\t<pubDate>"+now+"</pubDate>\n\t\t<lastBuildDate>"+now+"</lastBuildDate>\n\t\t<docs>https://podcasters.apple.com/support/823-podcast-requirements</docs>\n\t\t<generator>KB's RSS podcast feed generator v2.2 (https://kbs-lucas.nekoweb.org/RSS-Gen-Podcast.html)</generator>\n\t\t<podcast:locked";
          if(webMast.value!==""){RSStext+=` owner="${webMast.value.trim()}"`}else if(mEdit.value!==""){RSStext+=` owner="${mEdit.value.trim()}"`}RSStext+=">yes</podcast:locked>\n\t\t<podcast:medium>podcast</podcast:medium>";
          }
          RSStext+=chanGUID;
          itemRSS=ParseItem();
          if(itemRSS!==""){RSStext+="\n\t\t"+itemRSS.replaceAll("\n","\n\t\t")}
          if(RSStext!==""){RSStext=`<?xml version="1.0" encoding="UTF-8"?>\n<rss xmlns:podcast="https://podcastindex.org/namespace/1.0" xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" ${langChannel}version="2.0">\n\t<channel>`+RSStext;RSStext+="\n\t</channel>\n</rss>";}
          if((chLink.value!=="")&&(chanGUID!=="")){let idxs=chanGUID.indexOf('<podcast:guid>')+14;const gu=`${chanGUID.substring(idxs,chanGUID.indexOf('</podcast:guid>',idxs)).trim()}`;
              let par,lin;
              if(valURLBtn.previousElementSibling.tagName!=="P"){par=document.createElement('p');par.textContent="I got a little extra for you. This is a fast-follow link to your podcast, that works as usual, but enables fast-follow on select podcast apps: ";lin=document.createElement('a');valURLBtn.before(par);par.append(lin);
              }else{par=valURLBtn.previousElementSibling;lin=par.getElementsByTagName('a')[0];}
              lin.href=lin.textContent=`${chLink.value.trim()}#fastfollow-podcast:${gu}`;lin.target="_blank";
          }else if(valURLBtn.previousElementSibling.tagName==="P"){valURLBtn.previousElementSibling.remove()}
          return RSStext;
        }
        
        function updateRes(){if(chanCheck.checked){result.value=ParseChannel()}else{result.value=ParseItem();}result.style.height="1px";result.style.height=(result.scrollHeight)+"px";}
        const channelInput=document.getElementById('Channel');
        const valBtn=document.getElementById('validate');
        const valURLBtn=document.getElementById('validateURL');
        const valLivewire=document.getElementById('validLivewire');
        const valTF=document.getElementById('validTF');
        const valApple=document.getElementById('validApple');
        const valPodbaseRaw=document.getElementById('validPodbaseRaw');
        const valParag=document.getElementById('valParag');
        const chanCheck=document.querySelector('input[type="checkbox"][name="chanCheck"]');
        chanCheck.addEventListener('input', (event)=>{if(event.target.checked){channelInput.style.display="unset";valBtn.style.display="unset";valURLBtn.style.display="unset";valLivewire.style.display="unset";valTF.style.display="unset";valApple.style.display="unset";valPodbaseRaw.style.display="unset";valParag.style.display="unset";}else{channelInput.style.display="none";valBtn.style.display="none";valURLBtn.style.display="none";valLivewire.style.display="none";valTF.style.display="none";valApple.style.display="none";valPodbaseRaw.style.display="none";valParag.style.display="none";}updateRes();});
        function revChan(){if(!chanCheck.checked)chanCheck.click()}
        encFile.addEventListener("change", ()=>{if(encFile.files.length>1){encFile.setCustomValidity(`Multiple files selected`);encFile.reportValidity();return;}
            encFile.setCustomValidity("");
            new Promise((resolve, reject)=>{
                if(IsValidType(encFile.files[0],encFile.accept)){
                  GetDuration(encFile.files[0]).then(dur=>{itemEnc+=`\n\t<itunes:duration>${dur}</itunes:duration>`;}).finally(e=>{
                    if(content.value){itemEnc=`\n\t<enclosure url="${content.value.trim()}`}
                    else{itemEnc=`\n\t<enclosure url="NOT DEFINED!!!`;content.setCustomValidity(`Provide a file URL (even if it's not valid)`);content.reportValidity()}
                    itemEnc+=`"\n\t\tlength="${encFile.files[0].size}"\n\t\ttype="${encFile.files[0].type}"\n\t/>`;
                    resolve(itemEnc);return;
                  })
                }else{encFile.setCustomValidity(`Invalid type "${encFile.files[0].type}", please provide a M4A, MP3, MOV, MP4, M4V, or PDF file`);resolve(itemEnc);return;}
            }).finally(()=>{updateRes()});
        },false);
        const itemFields=[title, link, desc, episode, season, epImURL, explicEP];
        const Fields=[chTitle, chLink, chDesc, chaLink, chTags, mEdit, imURL, imDesc, imWidth, webMast, podAuthor, fund, fundTxt, manguid, lang, explicit, complete, ttl, ...itemFields];
        Fields.forEach((elem)=>{elem.addEventListener("input", updateRes);});
        content.addEventListener("change", ()=>{content.setCustomValidity("");itemEnc="";
            new Promise((resolve, reject)=>{
              if(content.value!==""){const option={method:'HEAD'};
                const url='https://test.cors.workers.dev/?'+content.value.trim();
                let blob=undefined;
                fetch(url,option).then(res=>{if(!res.ok){
                    content.setCustomValidity(`Can't access file from this site (bad response)`);content.reportValidity();return;
                }else{blob={size:res.headers.get('Content-Length'), type:res.headers.get('Content-Type')};
                    if(blob.size>0){
                      if(IsValidType(blob,encFile.accept)){
                        itemEnc+=`\n\t<enclosure url="${content.value.trim()}"\n\t\tlength="${blob.size}"\n\t\ttype="${blob.type}"\n\t/>`;
                      }else{content.setCustomValidity(`Invalid type "${blob.type}", please provide a M4A, MP3, MOV, MP4, M4V, or PDF file`);content.reportValidity();blob=undefined;}
                    }else{blob=undefined;content.setCustomValidity(`Invalid file size`);content.reportValidity();}
                }}).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){
                    content.setCustomValidity(`Can't access file from this site`);content.reportValidity();
                }else{content.setCustomValidity(e);content.reportValidity();}}).finally(e=>{
                  if((blob===undefined)&&(encFile.value!=="")){
                    if(IsValidType(encFile.files[0],encFile.accept)){
                      GetDuration(encFile.files[0]).then(dur=>{itemEnc+=`\n\t<itunes:duration>${dur}</itunes:duration>`;}).finally(e=>{
                      itemEnc+=`\n\t<enclosure url="${content.value.trim()}"\n\t\tlength="${encFile.files[0].size}"\n\t\ttype="${encFile.files[0].type}"\n\t/>`;
                      resolve(itemEnc);return;
                      })
                    }else{content.setCustomValidity("");encFile.setCustomValidity(`Invalid type "${encFile.files[0].type}", please provide a M4A, MP3, MOV, MP4, M4V, or PDF file`);resolve(itemEnc);return;}
                  }else if(blob===undefined){itemEnc+=`\n\t<enclosure url="${content.value.trim()}"\n\t\tlength="COULDN'T GET!!!"\n\t\ttype="COULDN'T GET!!!"\n\t/>`;
                  resolve(itemEnc);return
                  }else{resolve(itemEnc);return}
                });
              }else{
                  if((encFile.value!=="")&&(IsValidType(encFile.files[0],encFile.accept))){
                    GetDuration(encFile.files[0]).then(dur=>{itemEnc+=`\n\t<itunes:duration>${dur}</itunes:duration>`;}).finally(e=>{
                      content.setCustomValidity(`Provide a file URL (even if it's not valid)`);content.reportValidity();
                      itemEnc+=`\n\t<enclosure url=NOT DEFINED!!!\n\t\tlength="${encFile.files[0].size}"\n\t\ttype="${encFile.files[0].type}"\n\t/>`;
                      resolve(itemEnc);return;
                    });
                  }else{resolve(itemEnc);return;}
              }
            }).finally(()=>{updateRes()});
        });
        chapURL.addEventListener("change", ()=>{content.setCustomValidity("");itemChap="";
          new Promise((resolve, reject)=>{
            if(chapURL.value!==""){
              const option={method:'GET',mode:'cors'};
              let blobc=undefined, chapterURL=chapURL.value.trim();
              fetch(chapterURL,option).then(res=>{if(!res.ok){
                chapURL.setCustomValidity(`Can't access file from this site (bad response)`);chapURL.reportValidity();return;
              }else{blobc={type:res.headers.get('Content-Type'),name:chapterURL.substring(chapterURL.lastIndexOf('/'))};if(!IsValidType(blobc,"application/json,application/json+chapters,.json")){chapURL.setCustomValidity(`Filetype ${blobc.type} is not valid, please provide json file`);chapURL.reportValidity();blobc=undefined}else{return res.json();}}
              }).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){
                chapURL.setCustomValidity(`Can't access file from this site, probably due to CORS policies. If that's the case, you need to fix it!`);chapURL.reportValidity();
              }else if(e.toString().includes("SyntaxError:")){
                chapURL.setCustomValidity(`Your file couldn't be pased as JSON! Got this error:\n${e}`);chapURL.reportValidity();
              }else{chapURL.setCustomValidity(e);chapURL.reportValidity()}}).then(da=>{
                if(blobc!==undefined){
                  if(da!==undefined){if((da.version===undefined)||(da.chapters===undefined)){chapURL.setCustomValidity("File doesn't meet the json chapters format");chapURL.reportValidity()}
                  }else if(chapURL.validationMessage===""){chapURL.setCustomValidity("Couldn't check if file meets the json chapters format");chapURL.reportValidity()}
                }
                itemChap+=`\n\t<podcast:chapters url="${chapterURL}" type="application/json+chapters" />`;
                resolve(itemChap);return;
              });
            }else{resolve(itemChap);return}
          }).finally(()=>{updateRes()});
        });
        epType.addEventListener('change',(event)=>{updateRes()});podType.addEventListener('change',(event)=>{if(podType.value==="serial"){episode.required=true}else{episode.required=false}updateRes()});
        [title,manguid].forEach((elem)=>{elem.addEventListener('change', (event)=>{event.target.setCustomValidity("");event.target.reportValidity();})});
        [chaLink,manguid].forEach((elem)=>{elem.addEventListener('change',(event)=>{chanGUID="";
            let prom;
            if(manguid.value!==""){chanGUID+=`\n\t\t<podcast:guid>${manguid.value.trim()}</podcast:guid>`;
              prom=new Promise((reso)=>{reso()});
            }
            else if(chaLink.value!==""){let urlO=new URL(chaLink.value.trim());let urlS=urlO.host+urlO.pathname+urlO.search;if(urlS.endsWith('/')){urlS=urlS.substring(0,urlS.length-1)}//remove scheme/protocol and trailing slashes
              //prom=fetch(`https://www.uuidtools.com/api/generate/v5/namespace/ead4c236-bf58-58c6-a2c6-a6b28d128cb6/name/base64:${btoa(urlS)}`).then(res=>{if(res.ok){return res.text()}else{Promise.reject()}}).then(t=>{RSStext+=`\n\t\t<podcast:guid>${t.substring(2,(t.length-2))}</podcast:guid>`;return RSStext})
              prom=v5(urlS,'ead4c236-bf58-58c6-a2c6-a6b28d128cb6').then(res=>{chanGUID+=`\n\t\t<podcast:guid>${res}</podcast:guid>`})
            }
            prom.finally(()=>{updateRes()});
        })});
        lang.addEventListener('invalid', (event)=>{event.target.setCustomValidity('Please enter a valid RFC 5646/BCP 47 language code');});
        chaLink.addEventListener('change',(e)=>{e.target.setCustomValidity("")});
        [epImURL,imURL].forEach((elem)=>{elem.addEventListener('change',(e)=>{e.target.setCustomValidity("");TreatImage(e.target)})});
        const copyBtn=document.getElementById('copy');
        const fileDwld=document.getElementById('fileDwld');
        copyBtn.addEventListener('click', (event)=>{if(chanCheck.checked){form.reportValidity()}else{[content,...itemFields].forEach((e)=>{e.reportValidity()});}
            navigator.clipboard.writeText(result.value).then((e)=>{console.log("copied!");event.target.innerText="Copied!";setTimeout(function(){this.innerText="Copy result to clipboard";}.bind(event.target), 3000);}).catch((error)=>{console.error(error);});});
        fileDwld.addEventListener('click', (event)=>{if(result.value==="")alert('Your results are empty!');
            else{if(chanCheck.checked){form.reportValidity()}else{[content,...itemFields].forEach((e)=>{e.reportValidity()});}
                const link=document.createElement('a');
                link.setAttribute('href', 'data:text/xml;charset=utf-8,'+encodeURIComponent(result.value));
                link.setAttribute('download', 'RSS');
                document.body.appendChild(link);
                link.click();
                window.URL.revokeObjectURL(link.href);
                document.body.removeChild(link);
            }
        });
        function validateRSSBoard(link=undefined, checker=undefined, mode=false){
          if(checker===undefined){checker=new URL("https://podba.se/validate/");}
          const params=new URLSearchParams(checker.search);
          if(mode){params.append("url", link.value.trim());window.open(checker.toString()+"?"+params.toString())}
          else{window.open(`${checker.toString()}${link.value.trim()}`)}
        }
        //valBtn.addEventListener('click', (event)=>{if(chanCheck.checked){form.reportValidity();validateRSSBoard();}else{[content,transURL,...itemFields].forEach((e)=>{e.reportValidity();});/*[content,transURL]*/}});
        valURLBtn.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://podba.se/validate/",true);}}});
        valBtn.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://www.castfeedvalidator.com/validate.php",true);}}});
        valLivewire.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://validator.livewire.io/?validate=",false);}}});
        valTF.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://validator.truefans.fm/?validate=",false);}}});
        valApple.addEventListener('click', (event)=>{if(chanCheck.checked){if(chaLink.value===""){chaLink.setCustomValidity("Please provide a file to validate via URL");chaLink.reportValidity();setTimeout(()=>{chaLink.setCustomValidity("")},3000);}else{chaLink.reportValidity();validateRSSBoard(chaLink,"https://podcastsconnect.apple.com/my-podcasts/new-feed?submitfeed=",false);}}});
        valPodbaseRaw.addEventListener('click', (event)=>{let url={value: `data:,${window.encodeURIComponent(result.value)}`};validateRSSBoard(url,"https://podba.se/validate/",true);});
        
        function uuidToBytes(uuid){
          let bytes=[];
          uuid.replace(/[a-fA-F0-9]{2}/g, function(hex){bytes.push(parseInt(hex, 16));});
          return bytes;
        }
        function stringToBytes(str){
          let bytes=new Array(str.length);
          for(let i=0;i<str.length;i++){bytes[i]=str.charCodeAt(i);}
          return bytes;
        }
        function v5(name, namespace){
          if(typeof name==='string') name=stringToBytes(name);
          if(typeof namespace==='string') namespace=uuidToBytes(namespace);
          if(!Array.isArray(name)) throw TypeError('name must be an array of bytes');
          if(!Array.isArray(namespace)||namespace.length!==16) throw TypeError('namespace must be uuid string or an Array of 16 byte values');
          return crypto.subtle.digest('SHA-1', new Uint8Array(namespace.concat(name))).then(hash=>{
            let bytes=Array.from(new Uint8Array(hash,0,16));
            bytes[6]=(bytes[6]&0x0f)|0x50;
            bytes[8]=(bytes[8]&0x3f)|0x80;
            let uuidS=bytes.map(v=>v.toString(16).padStart(2,'0')).join('');
            uuidS=`${uuidS.substring(0,8)}-${uuidS.substring(8,12)}-${uuidS.substring(12,16)}-${uuidS.substring(16,20)}-${uuidS.substring(20)}`;
            console.log('res:',uuidS);
            return uuidS;
          }).catch(e=>console.error(e));
        }
        //fetching existing feed
        let extXML;
        const fetchFeed=document.getElementById("fetchFeed");
        fetchFeed.addEventListener('click',(e)=>{
            extXML=undefined;
            if(chaLink.value===""){chaLink.setCustomValidity(`Please provide a URL to the feed file`);chaLink.reportValidity();return;}
            else if(!chaLink.checkValidity()){chaLink.reportValidity();return;}
            new Promise((res, rej)=>{
            fetchFeed.disabled=true;fetchFeed.textContent="Processing feed...";
            console.log(`fetching https://test.cors.workers.dev/?${chaLink.value.trim()}`);
            const option={method:'GET',mode:'cors'};
            fetch(`https://test.cors.workers.dev/?${chaLink.value.trim()}`,option).then(res=>{if(!res.ok){
              chaLink.setCustomValidity(`Can't access file from this site (bad response)`);chaLink.reportValidity();rej(chaLink.validationMessage);return;
            }else{return res.text()}
            }).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){
                chaLink.setCustomValidity(`Can't access file from this site, probably due to CORS policies. If that's the case, you need to fix it!`);chaLink.reportValidity();
            }else{chaLink.setCustomValidity(e);chaLink.reportValidity()}
            }).then(e=>{
              if(e!==undefined){const pars=new DOMParser();extXML=pars.parseFromString(e,"text/xml");GetAndApplyExtFeedValues(extXML)}
              //updateRes();
              res(extXML);
            });
            }).catch(e=>console.log("Caught rejection: ",e)).finally(()=>{fetchFeed.disabled=false;fetchFeed.textContent="Copy this feed's contents to the generator"});
        });
        function GetAndApplyExtFeedValues(feed){if(feed===undefined)return;
            const chan=feed.getElementsByTagName('channel')[0];const item=chan.getElementsByTagName('item')[0];
            for(const ch of chan.children){
                switch(ch.tagName){case 'title': chTitle.value=ch.textContent;break;
                case 'link': chLink.value=ch.textContent;break;
                case 'description': chDesc.value=ch.textContent;break;
                case 'language': lang.value=ch.textContent;break;
                case 'image': {let temp;
                    temp=ch.getElementsByTagName("url")[0]?.textContent;if(temp){imURL.value||=temp;console.log('got imUrl',temp,imURL.value)};
                    temp=ch.getElementsByTagName("description")[0]?.textContent;if(temp)imDesc.value=temp;
                    temp=parseInt(ch.getElementsByTagName("width")[0]?.textContent);if(temp)imWidth.valueAsNumber=temp;break;}
                case 'atom:link': {if(ch.getAttribute('rel')==='self'){if(chaLink.value==="")chaLink.value=ch.getAttribute('href')};break;}
                case 'itunes:image': imURL.value=ch.getAttribute("href")||"";imURL.dispatchEvent(new Event("change"));break;
                case 'itunes:explicit': explicit.checked=(ch.textContent==="true")?true:false;break;
                case 'itunes:complete': complete.checked=(ch.textContent==="Yes")?true:false;break;
                case 'itunes:type': podType.value=ch.textContent;break;
                case 'managingEditor': mEdit.value=ch.textContent;break;case 'webMaster': webMast.value=ch.textContent;break;
                case 'itunes:author': podAuthor.value=ch.textContent;break;
                case 'podcast:funding': fundTxt.value=ch.textContent;fund.value=ch.getAttribute("url")||"";break;
                case 'ttl': ttl.valueAsNumber=parseInt(ch.textContent);break;
                case 'podcast:locked': {const temp=ch.getAttribute("owner");if(temp){if(webMast.value===""){webMast.value=temp}else if(mEdit.value===""){mEdit.value=temp}}break;}
                case 'podcast:guid': manguid.value=ch.textContent;break;
                case 'itunes:category': {if(chTags.value!==""){chTags.value+=','}chTags.value+=ch.getAttribute("text")||"";
                if(ch.children){for(const tg of ch.children){const temp=tg.getAttribute("text")||"";if(temp!=="")chTags.value+=`0sub0${temp}`}}break;}
                case 'skipDays': {dayBools.fill(false);const daytgs=ch.getElementsByTagName('day');
                for(const d of daytgs){switch(d.textContent){case "Monday": skipMon.click();break;case "Tuesday": skipTue.click();break;case "Wednesday": skipWed.click();break;case "Thursday": skipThu.click();break;case "Friday": skipFri.click();break;case "Saturday": skipSat.click();break;case "Sunday": skipSun.click();break;}}break;}
                default:}
            }
            for(const ch of item.children){
                switch(ch.tagName){case 'title': title.value=ch.textContent;break;
                case 'itunes:title': title.value||=ch.textContent;break;
                case 'link': link.value=ch.textContent;break;
                case 'description': desc.value=ch.textContent;break;
                case 'enclosure': {content.value=ch.getAttribute('url');itemEnc=`\n\t${ch.outerHTML}`;
                    const temp=item.getElementsByTagName('itunes:duration')[0];
                    if(temp){const idx=temp.outerHTML.indexOf('xmlns:itunes="')+14;itemEnc+=`\n\t${temp.outerHTML.substring(0,idx-15)}${temp.outerHTML.substring(temp.outerHTML.indexOf('"',idx+1)+1)}`;};break;}
                case 'podcast:chapters': chapURL.value=ch.getAttribute('url')||"";chapURL.dispatchEvent(new Event("change"));break;
                case 'podcast:transcript': {const idx=ch.outerHTML.indexOf('xmlns:podcast="')+15;transList+=`\n\t${ch.outerHTML.substring(0,idx-16)}${ch.outerHTML.substring(ch.outerHTML.indexOf('"',idx+1)+1)}`;break;}
                case 'itunes:episodeType': epType.value=ch.textContent;break;
                case 'itunes:image': epImURL.value=ch.getAttribute("href")||"";epImURL.dispatchEvent(new Event("change"));break;
                case 'itunes:explicit': explicEP.checked=(ch.textContent==="true")?true:false;break;
                case 'itunes:episode': episode.valueAsNumber=parseInt(ch.textContent);break;
                case 'itunes:season': season.valueAsNumber=parseInt(ch.textContent);break;
                case 'podcast:episode': episode.valueAsNumber||=parseInt(ch.textContent);break;
                case 'podcast:season': season.valueAsNumber||=parseInt(ch.textContent);break;
                }
            }
            updateRes();
        }
        document.querySelectorAll('.dropZone').forEach(dz=>{
          dz.style.display='revert';
          dz.addEventListener('dragover',(ev)=>{ev.preventDefault()});
          dz.addEventListener('dragenter',(ev)=>{ev.target.classList.add("dragOver");});
          dz.addEventListener('dragleave',(ev)=>{ev.target.classList.remove("dragOver");});
          dz.addEventListener('drop',(ev)=>{ev.preventDefault();ev.target.classList.remove("dragOver");
            const fInp=ev.target.parentNode.getElementsByTagName('input')[0];
            fInp.files=ev.dataTransfer.files;
            fInp.dispatchEvent(new Event("change"));
            if(ev.dataTransfer.items){ev.dataTransfer.items.clear()}
          });
        });
        result.addEventListener('dragover',(ev)=>{ev.preventDefault()});
        result.addEventListener('dragenter',(ev)=>{ev.target.classList.add("dropZone","dragOver");result.style.display='revert';});
        result.addEventListener('dragleave',(ev)=>{ev.target.classList.remove("dropZone","dragOver");});
        result.addEventListener('drop',(ev)=>{ev.preventDefault();ev.target.classList.remove("dropZone","dragOver");
          const f=ev.dataTransfer.files[0];
          if(f){
              if(!f.name.endsWith('.xml')){result.value="Invalid file extension";return}
              else{const read=new FileReader();
                read.onload=(e)=>{const pars=new DOMParser();extXML=pars.parseFromString(e.target.result,"text/xml");GetAndApplyExtFeedValues(extXML)};
                read.readAsText(f);
              }
          }else{
              const s=ev.dataTransfer.items[0];
              if(s?.kind!=='string'){result.value="Unespected drop";return}
              else{s.getAsString((str)=>{const pars=new DOMParser();extXML=pars.parseFromString(str,"text/xml");GetAndApplyExtFeedValues(extXML)})}
          }
          if(ev.dataTransfer.items){ev.dataTransfer.items.clear()}
        });
        async function TreatImage(imgField){
            function delPreview(){if(imgField.parentElement.nextElementSibling?.tagName==='IMG'){imgField.parentElement.nextElementSibling.remove();imgField.parentElement.style.marginBlockEnd="revert";}}
            const res=await fetch(`https://test.cors.workers.dev/?${imgField.value.trim()}`,{method:'HEAD'}).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){imgField.setCustomValidity(`Can't access file from this site`);imgField.reportValidity();}
                else{imgField.setCustomValidity(e);imgField.reportValidity();}delPreview();return ""});
            if(!res.ok){imgField.setCustomValidity(`Can't access file from this site (bad response)`);imgField.reportValidity();delPreview();return "";
            }else{blob={size:res.headers.get('Content-Length'), type:res.headers.get('Content-Type'), lastMod:res.headers.get('Last-Modified')};
                if(blob.size<=0){blob=undefined;imgField.setCustomValidity(`Invalid file size`);imgField.reportValidity();delPreview();return ""}
                if(!IsValidType(blob,'image/png,image/jpeg,.jpeg,.png')){imgField.setCustomValidity(`Invalid type "${blob.type}", please provide a JPEG or PNG file`);imgField.reportValidity();blob=undefined;delPreview();return ""}
                else{
                  const imRes=await fetch(`https://test.cors.workers.dev/?${imgField.value.trim()}`,{method:'GET'}).catch(e=>{if(e.toString()==="TypeError: Failed to fetch"){imgField.setCustomValidity(`Can't access image for preview from this site`);imgField.reportValidity();}
                  else{imgField.setCustomValidity(e);imgField.reportValidity();}delPreview();return ""});
                  if(!imRes.ok){imgField.setCustomValidity(`Can't access image preview from this site (bad response)`);imgField.reportValidity();delPreview();return "";
                  }else{
                    const bytes=new Uint8Array(await imRes.clone().arrayBuffer());
                    const data=await imRes.blob();
                    let img;
                    if(imgField.parentElement.nextElementSibling?.tagName==='IMG'){
                      img=imgField.parentElement.nextElementSibling;
                      URL.revokeObjectURL(img.src);
                    }else{
                      img=document.createElement('img');
                      imgField.parentElement.after(img);imgField.parentElement.style.marginBlockEnd="0";
                    }
                    async function loadImage(url,elem){
                      return new Promise((resolve, reject)=>{elem.onload=()=>resolve(elem);elem.onerror=reject;
                        elem.src=url});
                    }
                    await loadImage(URL.createObjectURL(data), img).catch(e=>{imgField.setCustomValidity(`Error while loading image: ${e}`);imgField.reportValidity();delPreview();return ""})
                    img.alt="Image preview";img.style.height='12.5em';img.style.width='fit-content';img.style.alignSelf='center';
                    if(bytes[0]===137&&bytes[1]===80&&bytes[2]===78&&bytes[3]===71&&bytes[4]===13&&bytes[5]===10&&bytes[6]=== 26&&bytes[7]===10){
                      console.log('PNG');
                      let offset=8,pxPerMX=0,pxPerMY=0;
                      while(offset<bytes.length){
                        const chunkLength=(bytes[offset]<<24)|(bytes[offset+1]<<16)|(bytes[offset+2]<<8)|bytes[offset+3];
                        console.log(`PNG chunk ${String.fromCharCode(bytes[offset+4],bytes[offset+5],bytes[offset+6],bytes[offset+7])} found`);
                        if(String.fromCharCode(bytes[offset+4],bytes[offset+5],bytes[offset+6],bytes[offset+7])==='pHYs'){
                          pxPerMX=(bytes[offset+8]<<24)|(bytes[offset+9]<<16)|(bytes[offset+10]<<8)|bytes[offset+11];
                          pxPerMY=(bytes[offset+12]<<24)|(bytes[offset+13]<<16)|(bytes[offset+14]<<8)|bytes[offset+15];
                          console.log('bytes[offset+16] (is pHYs px/m?): ',bytes[offset+16])
                          if(bytes[offset+16]===1){console.log('dpi: ',pxPerMY/39.37);if((pxPerMY/39.37<72)||(pxPerMX/39.37<72)){imgField.setCustomValidity(imgField.validationMessage+`Image doesn't have the minimum dpi of 72 (${pxPerMY/39.37})\n`);imgField.reportValidity()}}
                          break;
                        }else if(String.fromCharCode(bytes[offset+4],bytes[offset+5],bytes[offset+6],bytes[offset+7])==='IHDR'){
                          let tWidth=(bytes[offset+8]<<24)|(bytes[offset+9]<<16)|(bytes[offset+10]<<8)|bytes[offset+11],
                          tHeight=(bytes[offset+12]<<24)|(bytes[offset+13]<<16)|(bytes[offset+14]<<8)|bytes[offset+15];
                          if((tWidth<1400)||(tHeight<1400)){imgField.setCustomValidity(imgField.validationMessage+`Image is too small: ${tWidth} x ${tHeight}px (minimum 1400 x 1400px)\n`);imgField.reportValidity()}
                          if((tWidth>3000)||(tHeight>3000)){imgField.setCustomValidity(imgField.validationMessage+`Image is too big: ${tWidth} x ${tHeight}px (maximum 3000 x 3000px)\n`);imgField.reportValidity()}
                          if(tWidth!==tHeight){imgField.setCustomValidity(imgField.validationMessage+"Image is not a square\n");imgField.reportValidity()}
                        }
                        offset+=chunkLength+12;
                      }
                      {
                        const canvas=document.createElement('canvas');const ctx=canvas.getContext('2d');canvas.width=img.width;canvas.height=img.height;
                        ctx.drawImage(img,0,0);
                        const data=ctx.getImageData(0,0,canvas.width,canvas.height).data;
                        for(let i=3;i<data.length;i+=4){if(data[i]<255){imgField.setCustomValidity(imgField.validationMessage+"Image has alpha channel (transparency)\n");imgField.reportValidity();break}}
                      }
                      if(!imgField.value.trim().endsWith('.png')){imgField.setCustomValidity(imgField.validationMessage+"Image is in PNG format but the extension in the URL doesn't match\n");imgField.reportValidity()}
                    }else{console.log('JPEG');if(img.naturalHeight!==img.naturalWidth){imgField.setCustomValidity(validationMessage+"Image is not a square\n");imgField.reportValidity()}
                      if(!imgField.value.trim().endsWith('.jpeg')){imgField.setCustomValidity(imgField.validationMessage+"Image is not PNG (assumed JPEG) but the extension in the URL doesn't match\n");imgField.reportValidity()}
                    }
                    return "";
                  }
                }
            }
        }
        </script>
        <p>This generator complies with <a href="https://www.rssboard.org/rss-specification" target="_blank">the RSS specification</a>, <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390" target="_blank">the Apple Podcasts requirements and Itunes Podcast namespace specifications</a> and <a href="https://podcasting2.org/podcast-namespace" target="_blank">the
        <svg height="1.5em" version="1.1" viewBox="0 0 223.21 39.688" xmlns="http://www.w3.org/2000/svg"><rect x="38.961" y=".96052" width="183.29" height="37.767" fill="#d40000" stroke="#d40000" stroke-linecap="round" stroke-width="1.921" style="paint-order:fill markers stroke;white-space:pre"/><rect x="1" y="1" width="37.688" height="37.688" fill="#fff" stroke="#d40000" stroke-linecap="round" stroke-width="2" style="paint-order:fill markers stroke;white-space:pre"/><g transform="translate(-11.973,67.115)" fill="#d40000" stroke-width=".26458"><path d="m27.502-36.851c1.0315-1.0923 2.5665-1.7045 4.3441-1.7045 4.9438 0.08925 9.2297-4.5508 8.6795-9.4993-1.373-10.962-16.954-10.267-17.441 0.68781 0 0.05433 0.04367 0.09798 0.098 0.09798h2.7169c0.05337 0 0.09509-0.04269 0.09606-0.09604 0.43859-7.6357 11.412-7.5542 11.654 0.15425-0.03105 3.147-2.7256 5.7246-5.8734 5.745-4.9855-0.0388-8.7018 3.7184-8.695 8.6495 0 0.05433 0.04366 0.09798 0.098 0.09798h17.271c0.05337 0 0.09703-0.04269 0.09703-0.09604 0-1.5541-1.2595-2.8133-2.8139-2.8133h-10.922c-0.07277 0-0.12129-0.07858-0.08636-0.14261 0.21444-0.39678 0.47449-0.76056 0.77626-1.0807z"/><path d="m22.591-40.172c-5.8355-7.4553-0.48419-18.703 9.0939-18.739 10.885-0.07276 15.865 13.47 7.715 20.464-0.05822 0.05044-0.03784 0.14261 0.03493 0.16589 0.90725 0.28327 1.7184 0.78676 2.3705 1.4484 0.03784 0.03783 0.098 0.03977 0.13682 2e-3 2.6985-2.6183 4.3897-6.2689 4.4256-10.308 0.0718-8.0092-6.4293-14.621-14.44-14.684-12.599-0.13582-19.335 15.048-10.945 24.26 0.04755 0.05239 0.13293 0.03783 0.16107-0.02813 0.37842-0.88571 0.86359-1.7142 1.4467-2.466 0.02717-0.03492 0.02717-0.08246 0-0.11738z"/><path d="m34.725-47.269c0 1.6075-1.3031 2.9103-2.911 2.9103-3.8609-0.15328-3.8599-5.6683 0-5.8207 1.6078 0 2.911 1.3029 2.911 2.9103z"/></g><path d="m166.55 15.571q1.3998 0 2.461 0.56444 1.0612 0.54187 1.6708 1.4224v-1.7836h3.1835v12.598q0 1.7385-0.69991 3.0932-0.69991 1.3772-2.0997 2.1675-1.3998 0.8128-3.3867 0.8128-2.6642 0-4.3801-1.2418-1.6933-1.2418-1.9191-3.3867h3.1383q0.24835 0.85796 1.0612 1.3547 0.83538 0.51929 2.0094 0.51929 1.3772 0 2.2352-0.83538 0.85795-0.8128 0.85795-2.4836v-1.9417q-0.6096 0.88053-1.6933 1.4676-1.0612 0.58702-2.4384 0.58702-1.5804 0-2.89-0.8128t-2.0772-2.2804q-0.74507-1.4901-0.74507-3.4092 0-1.8965 0.74507-3.3641 0.76765-1.4676 2.0546-2.2578 1.3095-0.79022 2.9125-0.79022zm4.1317 6.4573q0-1.1515-0.45155-1.9643-0.45156-0.83538-1.2192-1.2644-0.76765-0.45156-1.6482-0.45156-0.88054 0-1.6256 0.42898-0.74507 0.42898-1.2192 1.2644-0.45156 0.8128-0.45156 1.9417t0.45156 1.9868q0.47413 0.83538 1.2192 1.2869 0.76764 0.45156 1.6256 0.45156 0.88053 0 1.6482-0.42898 0.76764-0.45156 1.2192-1.2644 0.45155-0.83538 0.45155-1.9868z" fill="#fff" stroke-width=".26458"/><path d="m59.672 17.4q0 1.2644-0.6096 2.3707-0.58702 1.1063-1.874 1.7836-1.2644 0.67733-3.206 0.67733h-2.6416v6.0509h-3.1609v-15.759h5.8025q1.8288 0 3.1157 0.63218 1.2869 0.63218 1.9191 1.7385 0.65476 1.1063 0.65476 2.5061zm-5.8251 2.2804q1.3095 0 1.9417-0.58702 0.63218-0.6096 0.63218-1.6933 0-2.3029-2.5739-2.3029h-2.5061v4.5833z" fill="#fff" stroke-width=".26458"/><path d="m67.165 28.486q-1.8062 0-3.2512-0.79022-1.445-0.8128-2.2804-2.2804-0.8128-1.4676-0.8128-3.3867t0.83538-3.3867q0.85796-1.4676 2.3255-2.2578 1.4676-0.8128 3.2738-0.8128t3.2738 0.8128q1.4676 0.79022 2.3029 2.2578 0.85796 1.4676 0.85796 3.3867t-0.88053 3.3867q-0.85796 1.4676-2.3481 2.2804-1.4676 0.79022-3.2964 0.79022zm0-2.7545q0.85796 0 1.603-0.4064 0.76764-0.42898 1.2192-1.2644t0.45156-2.032q0-1.7836-0.94827-2.7319-0.92569-0.97084-2.2804-0.97084t-2.2804 0.97084q-0.90311 0.94827-0.90311 2.7319t0.88053 2.7545q0.90311 0.94827 2.2578 0.94827z" fill="#fff" stroke-width=".26458"/><path d="m75.501 21.983q0-1.8965 0.74507-3.3641 0.76764-1.4676 2.0772-2.2578 1.3095-0.79022 2.9125-0.79022 1.2192 0 2.3255 0.54187 1.1063 0.51929 1.7611 1.3998v-5.938h3.206v16.708h-3.206v-1.8514q-0.58702 0.92569-1.6482 1.4901-1.0612 0.56444-2.461 0.56444-1.5804 0-2.89-0.8128-1.3095-0.8128-2.0772-2.2804-0.74507-1.4901-0.74507-3.4092zm9.8439 0.04516q0-1.1515-0.45156-1.9643-0.45156-0.83538-1.2192-1.2644-0.76765-0.45156-1.6482-0.45156t-1.6256 0.42898q-0.74507 0.42898-1.2192 1.2644-0.45156 0.8128-0.45156 1.9417t0.45156 1.9868q0.47413 0.83538 1.2192 1.2869 0.76765 0.45156 1.6256 0.45156 0.88053 0 1.6482-0.42898 0.76764-0.45156 1.2192-1.2644 0.45156-0.83538 0.45156-1.9868z" fill="#fff" stroke-width=".26458"/><path d="m90.803 22.028q0-1.9417 0.79022-3.3867 0.79022-1.4676 2.19-2.2578 1.3998-0.8128 3.206-0.8128 2.3255 0 3.8382 1.174 1.5353 1.1515 2.0546 3.2512h-3.4093q-0.27093-0.8128-0.92569-1.2644-0.63218-0.47413-1.5804-0.47413-1.3547 0-2.1449 0.99342-0.79022 0.97085-0.79022 2.7771 0 1.7836 0.79022 2.7771 0.79022 0.97085 2.1449 0.97085 1.9191 0 2.5061-1.7159h3.4093q-0.51929 2.032-2.0546 3.2286-1.5353 1.1966-3.8382 1.1966-1.8062 0-3.206-0.79022-1.3998-0.8128-2.19-2.2578-0.79022-1.4676-0.79022-3.4092z" fill="#fff" stroke-width=".26458"/><path d="m104.53 21.983q0-1.8965 0.74507-3.3641 0.76764-1.4676 2.0546-2.2578 1.3095-0.79022 2.9125-0.79022 1.3998 0 2.4384 0.56444 1.0612 0.56444 1.6933 1.4224v-1.7836h3.1835v12.508h-3.1835v-1.8288q-0.6096 0.88053-1.6933 1.4676-1.0612 0.56444-2.461 0.56444-1.5804 0-2.89-0.8128-1.2869-0.8128-2.0546-2.2804-0.74507-1.4901-0.74507-3.4092zm9.8439 0.04516q0-1.1515-0.45155-1.9643-0.45156-0.83538-1.2192-1.2644-0.76765-0.45156-1.6482-0.45156-0.88054 0-1.6256 0.42898-0.74506 0.42898-1.2192 1.2644-0.45155 0.8128-0.45155 1.9417t0.45155 1.9868q0.47414 0.83538 1.2192 1.2869 0.76765 0.45156 1.6256 0.45156 0.88053 0 1.6482-0.42898 0.76764-0.45156 1.2192-1.2644 0.45155-0.83538 0.45155-1.9868z" fill="#fff" stroke-width=".26458"/><path d="m125.29 28.486q-1.5353 0-2.7545-0.54187-1.2192-0.56444-1.9417-1.5127-0.69991-0.94827-0.76765-2.0997h3.1835q0.0903 0.72249 0.69991 1.1966 0.63218 0.47413 1.5579 0.47413 0.90311 0 1.3998-0.36124 0.51929-0.36124 0.51929-0.92569 0-0.6096-0.63218-0.90311-0.6096-0.31609-1.9643-0.67733-1.3998-0.33867-2.3029-0.69991-0.88053-0.36124-1.5353-1.1063-0.63218-0.74507-0.63218-2.0094 0-1.0386 0.58703-1.8965 0.6096-0.85796 1.7159-1.3547 1.1289-0.49671 2.6416-0.49671 2.2352 0 3.5673 1.1289 1.3321 1.1063 1.4676 3.0028h-3.0254q-0.0677-0.74507-0.63218-1.174-0.54187-0.45156-1.4676-0.45156-0.85796 0-1.3321 0.31609-0.45156 0.31609-0.45156 0.88053 0 0.63218 0.63218 0.97085 0.63218 0.31609 1.9643 0.65476 1.3547 0.33867 2.2352 0.69991 0.88054 0.36124 1.5127 1.1289 0.65475 0.74507 0.67733 1.9868 0 1.0837-0.6096 1.9417-0.58702 0.85796-1.7159 1.3547-1.1063 0.47413-2.5964 0.47413z" fill="#fff" stroke-width=".26458"/><path d="m136.2 18.371v6.0509q0 0.63218 0.29351 0.92569 0.31609 0.27093 1.0386 0.27093h1.4676v2.6642h-1.9868q-3.9963 0-3.9963-3.8834v-6.0283h-1.4901v-2.5964h1.4901v-3.0932h3.1835v3.0932h2.7996v2.5964z" fill="#fff" stroke-width=".26458"/><path d="m142.76 14.284q-0.83538 0-1.3998-0.51929-0.54187-0.54187-0.54187-1.3321 0-0.79022 0.54187-1.3095 0.56444-0.54187 1.3998-0.54187t1.3772 0.54187q0.56444 0.51929 0.56444 1.3095 0 0.79022-0.56444 1.3321-0.54187 0.51929-1.3772 0.51929zm1.5579 1.4901v12.508h-3.1609v-12.508z" fill="#fff" stroke-width=".26458"/><path d="m153.96 15.594q2.2352 0 3.6124 1.4224 1.3772 1.3998 1.3772 3.9285v7.3378h-3.1609v-6.9088q0-1.4901-0.74506-2.2804-0.74507-0.8128-2.032-0.8128-1.3095 0-2.0772 0.8128-0.74507 0.79022-0.74507 2.2804v6.9088h-3.1609v-12.508h3.1609v1.5579q0.63218-0.8128 1.603-1.2644 0.99343-0.47413 2.1675-0.47413z" fill="#fff" stroke-width=".26458"/><path d="m184.06 24.715q2.1675-1.8062 3.4544-3.0028 1.2869-1.2192 2.1449-2.5287 0.85796-1.3095 0.85796-2.5739 0-1.1515-0.54187-1.8062-0.54186-0.65476-1.6708-0.65476-1.1289 0-1.7385 0.76765-0.6096 0.74507-0.63217 2.0546h-3.0706q0.0903-2.7093 1.603-4.1092 1.5353-1.3998 3.8834-1.3998 2.5739 0 3.9511 1.3772 1.3772 1.3547 1.3772 3.5899 0 1.7611-0.94827 3.3641-0.94826 1.603-2.1675 2.7996-1.2192 1.174-3.1835 2.8448h6.6604v2.619h-11.153v-2.3481z" fill="#fff" stroke-width=".26458"/><path d="m197.79 28.44q-0.85795 0-1.4224-0.51929-0.54187-0.54187-0.54187-1.3321t0.54187-1.3095q0.56445-0.54187 1.4224-0.54187 0.83538 0 1.3772 0.54187 0.54187 0.51929 0.54187 1.3095t-0.54187 1.3321q-0.54187 0.51929-1.3772 0.51929z" fill="#fff" stroke-width=".26458"/><path d="m200.84 19.838q0-3.906 1.3998-6.1186 1.4224-2.2126 4.6962-2.2126t4.6736 2.2126q1.4224 2.2126 1.4224 6.1186 0 3.9285-1.4224 6.1637-1.3998 2.2352-4.6736 2.2352t-4.6962-2.2352q-1.3998-2.2352-1.3998-6.1637zm9.0763 0q0-1.6708-0.22578-2.7996-0.2032-1.1515-0.85795-1.874-0.63218-0.72249-1.8965-0.72249t-1.9191 0.72249q-0.63218 0.72249-0.85796 1.874-0.2032 1.1289-0.2032 2.7996 0 1.7159 0.2032 2.89 0.2032 1.1515 0.85796 1.874 0.65475 0.69991 1.9191 0.69991t1.9191-0.69991q0.65476-0.72249 0.85796-1.874 0.2032-1.174 0.2032-2.89z" fill="#fff" stroke-width=".26458"/></svg>
        namespace specification</a> simultaneusly, to not only make it work but also support most of the useful features/metadata offered by the namespaces. Feel free to report bugs or suggest new features or enhancements via the <a class="no-external" href="https://kbs-lucas.neocities.org/socials">social platform</a> that makes the most sense to you.</p>
        <p id="subParag">* Subtitles/closed captions/transcription tools I found:<ul>
            <li><a href="https://vizard.ai/tools/transcription/podcast-transcription" target="_blank">vizard.ai</a>: must sign up but subtitle/transcript download seems free</li>
            <li><a href="https://turboscribe.ai/" target="_blank">turboscribe.ai</a>: 3 30min long file transcripts daily for free</li>
            <li><a href="https://youtubetotranscript.com/" target="_blank">youtubetotranscript.com</a>: if you provide a YT link, it gets the transcript in plain text for free</li>
            <li><a href="https://edit.new" target="_blank">veed.io</a>: subtitle/transcript download was free at some point, it doesn't seem like it anymore</li>
        </ul></p>
        <p>TODO/Future enhancements (pending tasks in order of importance/ease of developement, tasks marked as done are kept for extra info):
        <ol>
          <li class="todo done">Support enclosures/episode files fully (via proxy; may need a proxy change, but the infrastructure is built)</li>
          <li class="todo done">Add Web Master or Managing Editor as the owner attribute in <a href="https://podcasting2.org/podcast-namespace/tags/locked" target="_blank">&lt;podcast:locked&gt;</a></li>
          <li class="todo done">Support <a href="https://podcasting2.org/podcast-namespace/tags/guid" target="_blank">&lt;podcast:guid&gt;</a> (that link also has some tools for generating guid's) automatic generation based on the <a href="#chaLink">RSS feed link</a> as the spec says, and manual input (in case it has already been generated for your podcast)</li>
          <li class="todo done"><a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=Use%20plain,your%20values" target="_blank">Trim leading and ending spaces for all values and limit characters to 255</a> unless they have a different limit</li>
          <li class="todo done">Support for <a href="https://podcasting2.org/podcast-namespace/tags/chapters" target="_blank">&lt;podcast:chapters&gt;</a>. <a id="chapterTool" href="https://mtillmann.github.io/chaptertool/">An (aparently) awesome open source tool for making chapters online</a>, use the chaptersjson format</li>
          <li class="todo done">Support <a href="https://podcasting2.org/podcast-namespace/tags/season" target="_blank">&lt;podcast:season&gt;</a> and <a href="https://podcasting2.org/podcast-namespace/tags/episode" target="_blank">&lt;podcast:episode&gt;</a> (without display attribute) and dupe for <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=%3Citunes:season%3E" target="_blank">&lt;itunes:season&gt;</a> and <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=%3Citunes:episode%3E" target="_blank">&lt;itunes:episode&gt;</a></li>
          <li class="todo done">Added a way to validate the feed the user is writing in the Podbase validator (all other validators need the feed to be hosted somewhere and use the <a href="#chaLink">feed link field</a>)</li>
          <li class="todo done">All itunes namespace's item tags (minus &lt;itunes:block&gt; and the redundant &lt;itunes:title&gt;) supported ðŸ¥³ðŸ¥³ðŸ¥³</li>
          <li class="todo done">Add HTTP HEAD requesting to images to <a href="https://help.apple.com/itc/podcasts_connect/#/itcb54353390#:~:text=Alpha%20Channel.-,Verify%20the,image%20file.,-%3Citem%3E" target="_blank">verify requirements</a> and possibly show a preview</li>
          <li class="todo done">Generate Guid-enabled fast-follow share links when possible (both podcast link and guid need to be provided)</li>
          <li class="todo">Support <a href="https://podcasting2.org/podcast-namespace/tags/person" target="_blank">&lt;podcast:person&gt;</a> (There's so many options omg! Planning on supporting at least host and guest roles)</li>
          <li class="todo">Support <a href="https://podcasting2.org/podcast-namespace/tags/funding" target="_blank">&lt;podcast:podroll&gt;</a> and &lt;podcast:remoteItem&gt; inside it by extension</li>
          <li class="todo wont">Wont do: Detect relative URL's on "free-form" fields and notify the user (The Regular Expressions are so complicated it doesn't make sense, the user can check this using the validators, which should detect this, and most platforms reading the feeds should be able to resolve relative paths based on the channel properties anyways). WARNING: The podbase validator doesn't detect this</li>
        </ol></p>
        <p>Privacy notice: This demo runs entirely within your browser. In other words, no data is sent to me, the code is sent to your browser and runs locally. You could theoretically load the page, cut your network connection and then use it (external feed validation and automatic file URL checking functionallity, the episode, transcripts and chapter ones, would fail, though. If you don't care about CORS checks, you can additionally use the file inputs to overcome this and make it a fully offline tool).</p>
        </div>
      </article>
    </main>
    <footer id="footer">
      <p>This webpage's HTML is licensed under a MIT license, CSS and site contents are protected by copyright&copy; law. <br></p>
      <p><a href="#">Back to top</a></p>
    </footer>
    <script defer src="https://kbs-lucas.neocities.org/scripts/window.js"></script>
    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
      kofiWidgetOverlay.draw('pigamer37', {
        'type': 'floating-chat',
        'floating-chat.donateButton.text': 'Tip Me',
        'floating-chat.donateButton.background-color': getComputedStyle(document.body).getPropertyValue('--accent-orange'),
        'floating-chat.donateButton.text-color': '#fff'
      });
    </script>
  </body>
</html>